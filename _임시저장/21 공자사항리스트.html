<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í≥µÏßÄÏÇ¨Ìï≠ Î∞è Îâ¥Ïä§ Í¥ÄÎ¶¨ | CertMatch Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- Í∏∞Î≥∏ ÌéòÏù¥ÏßÄ Ïä§ÌÉÄÏùº --- */
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 20px;
        }

        .admin-container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .admin-header h1 {
            margin: 0;
            font-size: 24px;
            color: #333;
        }

        /* --- Í≥µÏßÄÏÇ¨Ìï≠ Î¶¨Ïä§Ìä∏ Ïä§ÌÉÄÏùº --- */
        #noticeListContainer {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .notice-item {
            display: flex;
            align-items: center;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background-color: #fff;
            transition: box-shadow 0.3s;
        }

        .notice-item:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .notice-content {
            flex-grow: 1;
            margin-right: 20px;
        }

        .notice-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0 0 8px 0;
            color: #333;
        }

        .notice-meta {
            display: flex;
            gap: 15px;
            align-items: center;
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
        }

        .notice-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .chips-container {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .chip {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
        }

        .category-chip {
            background-color: #e6f7ff;
            color: #1890ff;
        }

        .cert-chip {
            background-color: #f0f0f0;
            color: #555;
        }

        .status-published { color: #52c41a; }
        .status-scheduled { color: #fa8c16; }

        .notice-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background-color: #fff;
            color: #666;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon:hover {
            border-color: #4a6fdc;
            color: #4a6fdc;
            transform: scale(1.1);
        }
        .btn-icon.delete:hover {
            border-color: #ff4d4f;
            color: #ff4d4f;
        }

        /* --- Î™®Îã¨ Ïä§ÌÉÄÏùº (Ïù¥Ï†Ñ ÏΩîÎìúÏôÄ ÎèôÏùº) --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 0;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideIn 0.3s;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            color: #aaa;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
        }
        .modal-close:hover { color: #333; }

        .notice-form {
            padding: 20px;
            overflow-y: auto;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 15px;
            color: #444;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: #4a6fdc;
            box-shadow: 0 0 0 3px rgba(74, 111, 220, 0.1);
            outline: none;
        }

        .form-textarea { resize: vertical; min-height: 120px; }
        .form-row { display: flex; gap: 20px; }
        .form-row .form-group { flex: 1; }

        .selector-container { display: flex; gap: 12px; flex-wrap: wrap; }
        .icon-option, .cert-chip-selector {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border-radius: 8px;
            font-weight: 500;
        }
        .icon-option {
            width: 50px; height: 50px; border: 2px solid #e0e0e0; font-size: 24px;
        }
        .icon-option:hover { transform: scale(1.1); border-color: #4a6fdc; }
        .icon-option.active { border-color: #4a6fdc; background-color: #f0f4ff; transform: scale(1.1); }
        .cert-chip-selector {
            padding: 8px 16px; background-color: #f0f0f0; color: #555; border: 1px solid #ddd; font-size: 14px;
        }
        .cert-chip-selector:hover { background-color: #e8e8e8; border-color: #ccc; }
        .cert-chip-selector.active { background-color: #4a6fdc; color: white; border-color: #4a6fdc; }

        .radio-group { display: flex; gap: 20px; font-size: 15px; }
        .radio-item { display: flex; align-items: center; cursor: pointer; }
        .radio-item input[type="radio"] { margin-right: 8px; cursor: pointer; }

        .disabled-fieldset { opacity: 0.5; pointer-events: none; }
        .disabled-fieldset .form-input { background-color: #f5f5f5; cursor: not-allowed; }

        .form-actions {
            display: flex; justify-content: flex-end; gap: 15px; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;
        }
        .btn {
            padding: 12px 25px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; border: none; transition: background-color 0.3s, transform 0.2s;
        }
        .btn-primary { background-color: #4a6fdc; color: white; }
        .btn-primary:hover { background-color: #3a5ebd; transform: translateY(-2px); }
        .btn-secondary { background-color: #f5f5f5; color: #555; }
        .btn-secondary:hover { background-color: #e8e8e8; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    </style>
</head>
<body>

    <div class="admin-container">
        <div class="admin-header">
            <h1><i class="fas fa-list-alt"></i> Í≥µÏßÄÏÇ¨Ìï≠ Î∞è Îâ¥Ïä§ Í¥ÄÎ¶¨</h1>
            <button class="btn btn-primary" id="addNewNoticeBtn">
                <i class="fas fa-plus"></i> ÏÉà Í≥µÏßÄÏÇ¨Ìï≠ Ï∂îÍ∞Ä
            </button>
        </div>

        <div id="noticeListContainer">
            <!-- JavaScriptÎ°ú Î¶¨Ïä§Ìä∏ Ìï≠Î™©Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
        </div>
    </div>

    <!-- Í≥µÏßÄÏÇ¨Ìï≠ Ï∂îÍ∞Ä/ÏàòÏ†ï Î™®Îã¨ -->
    <div class="modal" id="noticeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Í≥µÏßÄÏÇ¨Ìï≠ Îì±Î°ù</h3>
                <button class="modal-close" id="closeModalBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="noticeForm" class="notice-form">
                <!-- Ïà®Í≤®ÏßÑ ID ÌïÑÎìú (ÏàòÏ†ï Ïãú ÏÇ¨Ïö©) -->
                <input type="hidden" id="noticeId">

                <div class="form-group">
                    <label for="noticeTitle">Ï†úÎ™©</label>
                    <input type="text" id="noticeTitle" class="form-input" placeholder="Í≥µÏßÄÏÇ¨Ìï≠ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                </div>

                <div class="form-group">
                    <label for="noticeContent">ÎÇ¥Ïö©</label>
                    <textarea id="noticeContent" class="form-textarea" placeholder="Í≥µÏßÄÏÇ¨Ìï≠ ÏÉÅÏÑ∏ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="noticeDate">ÏûëÏÑ±ÏùºÏûê</label>
                        <input type="date" id="noticeDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="noticeOrg">Í∏∞Í¥Ä/ÏÜåÏä§</label>
                        <input type="text" id="noticeOrg" class="form-input" placeholder="Ïòà: Í≥ºÌïôÍ∏∞Ïà†Ï†ïÎ≥¥ÌÜµÏã†Î∂Ä" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="noticeCategory">Î∂ÑÎ•ò</label>
                    <select id="noticeCategory" class="form-select" required>
                        <option value="">Î∂ÑÎ•òÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        <option value="ÏùºÎ∞ò">ÏùºÎ∞ò</option>
                        <option value="ÏÜçÎ≥¥">ÏÜçÎ≥¥</option>
                        <option value="Í∏¥Í∏âÍ≥µÏßÄ">Í∏¥Í∏âÍ≥µÏßÄ</option>
                        <option value="ÏÇ∞ÏóÖÎâ¥Ïä§">ÏÇ∞ÏóÖÎâ¥Ïä§</option>
                        <option value="Í∏ÄÎ°úÎ≤å">Í∏ÄÎ°úÎ≤å</option>
                        <option value="ÏßÄÏõêÏÇ¨ÏóÖ">ÏßÄÏõêÏÇ¨ÏóÖ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Í¥ÄÎ†® Ïù∏Ï¶ù (Ï§ëÎ≥µ ÏÑ†ÌÉù Í∞ÄÎä•)</label>
                    <div class="selector-container cert-selector">
                        <div class="cert-chip-selector" data-cert="ISMS-P">ISMS-P</div>
                        <div class="cert-chip-selector" data-cert="ISO 27001">ISO 27001</div>
                        <div class="cert-chip-selector" data-cert="GS Ïù∏Ï¶ù">GS Ïù∏Ï¶ù</div>
                        <div class="cert-chip-selector" data-cert="CPPG">CPPG</div>
                        <div class="cert-chip-selector" data-cert="Ï†ïÎ∂ÄÏßÄÏõê">Ï†ïÎ∂ÄÏßÄÏõê</div>
                        <div class="cert-chip-selector" data-cert="Í∏∞ÌÉÄ">Í∏∞ÌÉÄ</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Î∞úÌñâ ÏÑ§Ï†ï</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="publicationType" value="immediate" checked>
                            <span>Ï¶âÏãú Î∞úÌñâ</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="publicationType" value="scheduled">
                            <span>ÏòàÏïΩ Î∞úÌñâ</span>
                        </label>
                    </div>
                </div>

                <fieldset id="reservationFields" class="disabled-fieldset">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reserveDate">ÏòàÏïΩÏùºÏûê</label>
                            <input type="date" id="reserveDate" class="form-input" disabled>
                        </div>
                        <div class="form-group">
                            <label for="reserveTime">ÏòàÏïΩÏãúÍ∞Ñ</label>
                            <input type="time" id="reserveTime" class="form-input" disabled>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group">
                    <label>ÏïÑÏù¥ÏΩò ÏÑ†ÌÉù</label>
                    <div class="selector-container icon-selector">
                        <div class="icon-option active" data-icon="üì∞">üì∞</div>
                        <div class="icon-option" data-icon="üì¢">üì¢</div>
                        <div class="icon-option" data-icon="üî•">üî•</div>
                        <div class="icon-option" data-icon="üìà">üìà</div>
                        <div class="icon-option" data-icon="üí∞">üí∞</div>
                        <div class="icon-option" data-icon="üåç">üåç</div>
                        <div class="icon-option" data-icon="üìã">üìã</div>
                        <div class="icon-option" data-icon="‚ö†Ô∏è">‚ö†Ô∏è</div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelFormBtn">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn btn-primary" id="submitFormBtn">Îì±Î°ùÌïòÍ∏∞</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DOM ÏöîÏÜå ---
            const noticeListContainer = document.getElementById('noticeListContainer');
            const noticeModal = document.getElementById('noticeModal');
            const modalTitle = document.getElementById('modalTitle');
            const noticeForm = document.getElementById('noticeForm');
            const noticeIdInput = document.getElementById('noticeId');
            const addNewNoticeBtn = document.getElementById('addNewNoticeBtn');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const cancelFormBtn = document.getElementById('cancelFormBtn');
            const submitFormBtn = document.getElementById('submitFormBtn');

            // --- ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Í∞ÄÏ†∏Ïò¥) ---
            let noticesData = [
                {
                    id: 1,
                    title: "[ÏÜçÎ≥¥] Ï†ïÎ≥¥Î≥¥Ìò∏Î≤ï Í∞úÏ†ïÏïà Íµ≠Ìöå Î≥∏ÌöåÏùò ÌÜµÍ≥º",
                    content: "Í∞úÏù∏Ï†ïÎ≥¥Î≥¥Ìò∏ Í∞ïÌôî Ï°∞Ïπò, ÎÇ¥ÎÖÑ 1ÏõîÎ∂ÄÌÑ∞ ÏãúÌñâ ÏòàÏ†ï...",
                    date: "2025-01-15",
                    org: "Íµ≠Ìöå",
                    category: "ÏÜçÎ≥¥",
                    certifications: ["Í∏∞ÌÉÄ"],
                    icon: "üì∞",
                    publication: { type: "immediate" }
                },
                {
                    id: 2,
                    title: "Ï§ëÏÜåÍ∏∞ÏóÖ Ï†ïÎ≥¥Î≥¥Ìò∏ Ïù∏Ï¶ù ÏßÄÏõêÏÇ¨ÏóÖ (2025ÎÖÑ 1Ï∞®)",
                    content: "ISMS-P Ïù∏Ï¶ù Ï∑®Îìù ÎπÑÏö© ÏµúÎåÄ 70% ÏßÄÏõê (ÏµúÎåÄ 3,000ÎßåÏõê)",
                    date: "2025-01-15",
                    org: "Í≥ºÌïôÍ∏∞Ïà†Ï†ïÎ≥¥ÌÜµÏã†Î∂Ä",
                    category: "ÏßÄÏõêÏÇ¨ÏóÖ",
                    certifications: ["ISMS-P", "Ï†ïÎ∂ÄÏßÄÏõê"],
                    icon: "üì¢",
                    publication: { type: "scheduled", date: "2025-02-01", time: "09:00" }
                },
                {
                    id: 3,
                    title: "2025ÎÖÑ ÏÉÅÍ∏âÏ¢ÖÌï©Î≥ëÏõê ISMS-P ÏùòÎ¨¥Ïù∏Ï¶ù Í∏∞Ìïú ÏïàÎÇ¥",
                    content: "Ï†ÑÍµ≠ 47Í∞ú ÏÉÅÍ∏âÏ¢ÖÌï©Î≥ëÏõê ÎåÄÏÉÅ 2025.08.31ÍπåÏßÄ Ïù∏Ï¶ù Ï∑®Îìù ÌïÑÏàò",
                    date: "2025-01-10",
                    org: "ÌïúÍµ≠Ïù∏ÌÑ∞ÎÑ∑ÏßÑÌù•Ïõê",
                    category: "Í∏¥Í∏âÍ≥µÏßÄ",
                    certifications: ["ISMS-P"],
                    icon: "üî•",
                    publication: { type: "immediate" }
                }
            ];

            // --- Î¶¨Ïä§Ìä∏ Î†åÎçîÎßÅ Ìï®Ïàò ---
            function renderNotices() {
                noticeListContainer.innerHTML = '';
                noticesData.forEach(notice => {
                    const status = notice.publication.type === 'immediate' 
                        ? '<span class="status-published"><i class="fas fa-check-circle"></i> Î∞úÌñâ ÏôÑÎ£å</span>'
                        : `<span class="status-scheduled"><i class="fas fa-clock"></i> ${notice.publication.date} ${notice.publication.time} ÏòàÏïΩ</span>`;
                    
                    const certChips = notice.certifications.map(cert => `<span class="chip cert-chip">${cert}</span>`).join('');
                    
                    const noticeItem = document.createElement('div');
                    noticeItem.className = 'notice-item';
                    noticeItem.innerHTML = `
                        <div class="notice-content">
                            <h3 class="notice-title">${notice.title}</h3>
                            <div class="notice-meta">
                                <span class="notice-meta-item"><i class="fas fa-calendar"></i> ${notice.date}</span>
                                <span class="notice-meta-item"><i class="fas fa-building"></i> ${notice.org}</span>
                                <span class="notice-meta-item">${status}</span>
                            </div>
                            <div class="chips-container">
                                <span class="chip category-chip">${notice.category}</span>
                                ${certChips}
                            </div>
                        </div>
                        <div class="notice-actions">
                            <button class="btn-icon edit" data-id="${notice.id}" title="ÏàòÏ†ï">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon delete" data-id="${notice.id}" title="ÏÇ≠Ï†ú">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    `;
                    noticeListContainer.appendChild(noticeItem);
                });
            }

            // --- Î™®Îã¨ Ï†úÏñ¥ Ìï®Ïàò ---
            function openModal(isEdit = false, noticeId = null) {
                modalTitle.textContent = isEdit ? 'Í≥µÏßÄÏÇ¨Ìï≠ ÏàòÏ†ï' : 'ÏÉà Í≥µÏßÄÏÇ¨Ìï≠ Îì±Î°ù';
                submitFormBtn.textContent = isEdit ? 'ÏàòÏ†ïÌïòÍ∏∞' : 'Îì±Î°ùÌïòÍ∏∞';
                
                if (isEdit && noticeId) {
                    const notice = noticesData.find(n => n.id === parseInt(noticeId));
                    if (notice) {
                        noticeIdInput.value = notice.id;
                        document.getElementById('noticeTitle').value = notice.title;
                        document.getElementById('noticeContent').value = notice.content;
                        document.getElementById('noticeDate').value = notice.date;
                        document.getElementById('noticeOrg').value = notice.org;
                        document.getElementById('noticeCategory').value = notice.category;
                        
                        // Ïù∏Ï¶ù Ïπ© ÏÑ§Ï†ï
                        document.querySelectorAll('.cert-chip-selector').forEach(chip => {
                            chip.classList.toggle('active', notice.certifications.includes(chip.dataset.cert));
                        });

                        // Î∞úÌñâ ÏÑ§Ï†ï
                        const pubType = notice.publication.type;
                        document.querySelector(`input[name="publicationType"][value="${pubType}"]`).checked = true;
                        if (pubType === 'scheduled') {
                            document.getElementById('reservationFields').classList.remove('disabled-fieldset');
                            document.getElementById('reserveDate').disabled = false;
                            document.getElementById('reserveTime').disabled = false;
                            document.getElementById('reserveDate').value = notice.publication.date;
                            document.getElementById('reserveTime').value = notice.publication.time;
                        }
                        
                        // ÏïÑÏù¥ÏΩò ÏÑ§Ï†ï
                        document.querySelectorAll('.icon-option').forEach(opt => {
                            opt.classList.toggle('active', opt.dataset.icon === notice.icon);
                        });
                    }
                } else {
                    noticeForm.reset(); // Ìèº Ï¥àÍ∏∞Ìôî
                    noticeIdInput.value = ''; // ID ÌïÑÎìú Ï¥àÍ∏∞Ìôî
                }
                noticeModal.classList.add('active');
            }

            function closeModal() {
                noticeModal.classList.remove('active');
            }

            // --- Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ---
            addNewNoticeBtn.addEventListener('click', () => openModal(false));
            closeModalBtn.addEventListener('click', closeModal);
            cancelFormBtn.addEventListener('click', closeModal);

            // Î¶¨Ïä§Ìä∏ Ìï≠Î™© ÌÅ¥Î¶≠ (Ïù¥Î≤§Ìä∏ ÏúÑÏûÑ)
            noticeListContainer.addEventListener('click', function(e) {
                const editBtn = e.target.closest('.edit');
                const deleteBtn = e.target.closest('.delete');

                if (editBtn) {
                    openModal(true, editBtn.dataset.id);
                } else if (deleteBtn) {
                    if (confirm('Ï†ïÎßêÎ°ú ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                        const idToDelete = parseInt(deleteBtn.dataset.id);
                        noticesData = noticesData.filter(n => n.id !== idToDelete);
                        renderNotices();
                    }
                }
            });

            // Ìèº Ï†úÏ∂ú Ï≤òÎ¶¨
            noticeForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    title: document.getElementById('noticeTitle').value,
                    content: document.getElementById('noticeContent').value,
                    date: document.getElementById('noticeDate').value,
                    org: document.getElementById('noticeOrg').value,
                    category: document.getElementById('noticeCategory').value,
                    certifications: Array.from(document.querySelectorAll('.cert-chip-selector.active')).map(chip => chip.dataset.cert),
                    icon: document.querySelector('.icon-option.active').dataset.icon,
                    publication: {
                        type: document.querySelector('input[name="publicationType"]:checked').value
                    }
                };
                
                if (formData.publication.type === 'scheduled') {
                    formData.publication.date = document.getElementById('reserveDate').value;
                    formData.publication.time = document.getElementById('reserveTime').value;
                }

                const editingId = noticeIdInput.value;
                if (editingId) {
                    // ÏàòÏ†ï
                    const index = noticesData.findIndex(n => n.id === parseInt(editingId));
                    if (index !== -1) {
                        noticesData[index] = { ...noticesData[index], ...formData };
                    }
                    alert('ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.');
                } else {
                    // Ï∂îÍ∞Ä
                    const newNotice = { id: Date.now(), ...formData };
                    noticesData.unshift(newNotice); // ÏÉà Ìï≠Î™©ÏùÑ Î¶¨Ïä§Ìä∏ Îß® ÏúÑÏóê Ï∂îÍ∞Ä
                    alert('Îì±Î°ùÎêòÏóàÏäµÎãàÎã§.');
                }

                renderNotices();
                closeModal();
            });
            
            // Í∏∞ÌÉÄ Ìèº ÎÇ¥Î∂Ä Ïù¥Î≤§Ìä∏ (ÏïÑÏù¥ÏΩò, Ïù∏Ï¶ù, ÏòàÏïΩ Î∞úÌñâ Îì±)
            document.querySelectorAll('.icon-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.icon-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            document.querySelectorAll('.cert-chip-selector').forEach(chip => {
                chip.addEventListener('click', () => chip.classList.toggle('active'));
            });
            document.querySelectorAll('input[name="publicationType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const isScheduled = this.value === 'scheduled';
                    const reservationFields = document.getElementById('reservationFields');
                    reservationFields.classList.toggle('disabled-fieldset', !isScheduled);
                    reservationFields.querySelectorAll('.form-input').forEach(input => input.disabled = !isScheduled);
                });
            });


            // --- Ï¥àÍ∏∞ Î†åÎçîÎßÅ ---
            renderNotices();
        });
    </script>

</body>
</html>