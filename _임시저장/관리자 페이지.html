<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CertMatch - 관리자 대시보드</title>
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js는 JS 라이브러리이므로 <link rel="stylesheet">가 아니라 <script>로 로드해야 합니다. -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- CSS Styles --- */
        :root {
            --primary-color: #4a69bd;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --sidebar-width: 260px;
            --header-height: 70px;
            --border-radius: 8px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: var(--dark-color);
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--dark-color);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #495057;
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .sidebar-nav ul {
            list-style: none;
            padding: 20px 0;
        }

        .sidebar-nav .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: #adb5bd;
            text-decoration: none;
            transition: background-color 0.3s, color 0.3s;
        }

        .sidebar-nav .nav-link:hover, .sidebar-nav .nav-link.active {
            background-color: var(--primary-color);
            color: white;
        }

        .sidebar-nav .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .sub-menu {
            background-color: #495057;
            list-style: none;
            display: none; /* Initially hidden */
        }

        .sidebar-nav li:hover .sub-menu {
            display: block;
        }

        .sub-nav-link {
            display: block;
            padding: 10px 25px 10px 55px;
            color: #adb5bd;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .sub-nav-link:hover {
            background-color: #343a40;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            display: flex;
            flex-direction: column;
        }

        .main-header {
            background-color: white;
            padding: 0 30px;
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            padding: 10px 40px 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            width: 300px;
        }

        .search-bar i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }

        .admin-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .admin-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        /* Content Area */
        .content-area {
            padding: 30px;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 1.5rem;
            color: var(--dark-color);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color 0.3s, transform 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-secondary { background-color: var(--secondary-color); color: white; }
        .btn-danger { background-color: var(--danger-color); color: white; }
        .btn-sm { padding: 5px 10px; font-size: 0.8rem; }

        /* Metric Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .metric-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .metric-card:nth-child(1) .metric-icon { background-color: var(--info-color); }
        .metric-card:nth-child(2) .metric-icon { background-color: var(--success-color); }
        .metric-card:nth-child(3) .metric-icon { background-color: var(--warning-color); }
        .metric-card:nth-child(4) .metric-icon { background-color: var(--primary-color); }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .metric-change {
            font-size: 0.9rem;
            font-weight: 600;
        }
        .metric-change.positive { color: var(--success-color); }
        .metric-change.negative { color: var(--danger-color); }

        /* Charts */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .chart-card {
            background-color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-card h3 {
            margin-bottom: 20px;
            color: var(--dark-color);
        }

        /* Filters & Bulk Actions */
        .filters-bar, .bulk-actions {
            background-color: white;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filters-bar select, .filters-bar input {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        /* Table */
        .table-container {
            background-color: white;
            border-radius: var(--border-radius);
            overflow-x: auto;
            box-shadow: var(--box-shadow);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background-color: var(--light-color);
            font-weight: 600;
            color: var(--dark-color);
        }

        .data-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }
        .status-badge.active { background-color: var(--success-color); }
        .status-badge.suspended { background-color: var(--danger-color); }
        .status-badge.dormant { background-color: var(--warning-color); color: var(--dark-color); }
        .status-badge.pending { background-color: var(--info-color); }
        .status-badge.verified { background-color: var(--primary-color); }
        .status-badge.rejected { background-color: var(--secondary-color); }

        /* Settings Form */
        .settings-form {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-width: 600px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="password"],
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .checkbox-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: normal;
        }

        /* Report Controls */
        .report-controls {
            margin-bottom: 20px;
            text-align: right;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 2000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
        }

        .modal-content {
            background-color: #fefefe;
            margin: 10% auto; /* 10% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            margin: 0;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
        }

        .modal-footer {
            text-align: right;
            margin-top: 20px;
        }

        /* 콘텐츠 관리 공통 스타일 */
        .section-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 16px;
        }
        .card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 16px;
        }
        .section-header .actions {
            display: flex;
            gap: 8px;
        }

        /* 베너 관리 */
        .banner-management .preview-section {
            grid-column: span 5;
        }
        .banner-management .calendar-section {
            grid-column: span 7;
        }
        .preview-container {
            position: relative;
            height: 220px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            background: #f9fafb;
        }
        .preview-slide {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            transition: opacity .3s ease;
        }
        .preview-dots {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
        }
        .preview-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #d1d5db;
            cursor: pointer;
        }
        .preview-dot.active { background: #2563eb; }
        .calendar-container {
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 12px;
        }
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        .calendar-day {
            padding: 10px;
            text-align: center;
            border: 1px dashed #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            background: #fafafa;
        }
        .calendar-day.selected { border-color: #2563eb; background: #eef2ff; }
        .banner-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        .banner-slot {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            background: #fff;
        }
        .banner-slot h4 { margin: 0 0 8px; font-size: 14px; }
        .banner-slot .slot-body { font-size: 13px; color: #4b5563; }

        /* Q&A 관리 */
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }
        .filter-tab {
            padding: 8px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            background: #fff;
            font-size: 13px;
        }
        .filter-tab.active { background: #2563eb; color: #fff; border-color: #2563eb; }

        /* 공고 관리 */
        .job-actions { display: flex; gap: 8px; }
        .job-list .data-table td { vertical-align: middle; }
    </style>
</head>
<body>

    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-shield-alt"></i> CertMatch Admin</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#" class="nav-link active" data-target="dashboard"><i class="fas fa-tachometer-alt"></i> 대시보드</a></li>
                    <li>
                        <a href="#" class="nav-link" data-target="users"><i class="fas fa-users"></i> 사용자 관리</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="sub-nav-link" data-target="users">기본 정보 관리</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="experts">전문가 관리</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="companies">기업 관리</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="admins">관리자 계정</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="reports"><i class="fas fa-chart-bar"></i> 통계 리포트</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="sub-nav-link" data-target="reports-user-analysis">사용자 분석</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="reports-business">비즈니스 분석</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="reports-operations">운영 리포트</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="content-management"><i class="fas fa-folder-open"></i> 콘텐츠 관리</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="sub-nav-link" data-target="banners">베너 관리</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="qa-management">Q&A 답변</a></li>
                            <li><a href="#" class="sub-nav-link" data-target="job-management">공고 관리</a></li>
                        </ul>
                    </li>
                    <li><a href="#" class="nav-link" data-target="settings"><i class="fas fa-cog"></i> 설정</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <h1 class="page-title">대시보드</h1>
                <div class="header-actions">
                    <div class="search-bar">
                        <input type="text" placeholder="전체 검색...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="admin-profile">
                        <span>관리자</span>
                        <img src="https://i.pravatar.cc/40?img=5" alt="Admin">
                    </div>
                </div>
            </header>

            <div class="content-area">
                <!-- 대시보드 섹션 -->
                <section id="dashboard" class="content-section active">
                    <!-- ... (기존 대시보드 내용) ... -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon"><i class="fas fa-users"></i></div>
                            <div class="metric-info">
                                <h3>전체 사용자</h3>
                                <p class="metric-value">12,543</p>
                                <span class="metric-change positive">+12.5%</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon"><i class="fas fa-user-check"></i></div>
                            <div class="metric-info">
                                <h3>신규 사용자 (월)</h3>
                                <p class="metric-value">845</p>
                                <span class="metric-change positive">+5.2%</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon"><i class="fas fa-handshake"></i></div>
                            <div class="metric-info">
                                <h3>월간 매칭 건수</h3>
                                <p class="metric-value">321</p>
                                <span class="metric-change negative">-2.1%</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon"><i class="fas fa-won-sign"></i></div>
                            <div class="metric-info">
                                <h3>월 수익</h3>
                                <p class="metric-value">2.8억</p>
                                <span class="metric-change positive">+18.3%</span>
                            </div>
                        </div>
                    </div>
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>가입자 추이</h3>
                            <canvas id="signupTrendChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>사용자 유형 분포</h3>
                            <canvas id="userTypeChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 관리자 계정 섹션 -->
                <section id="admins" class="content-section">
                    <div class="section-header">
                        <h2>관리자 계정 목록</h2>
                        <button class="btn btn-primary" onclick="openAdminModal()"><i class="fas fa-plus"></i> 관리자 추가</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>이름</th>
                                    <th>이메일</th>
                                    <th>역할</th>
                                    <th>상태</th>
                                    <th>생성일</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="adminTableBody">
                                <!-- JS로 동적으로 채워짐 -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- 기존 다른 섹션들 (users, experts, companies, reports, settings) -->
                <!-- ... (이전 코드와 동일) ... -->
                 <!-- 사용자 관리 섹션 -->
                <section id="users" class="content-section">
                    <div class="section-header">
                        <h2>사용자 목록</h2>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> 사용자 추가</button>
                    </div>
                    <div class="filters-bar">
                        <select id="userTypeFilter">
                            <option value="all">전체 유형</option>
                            <option value="expert">전문가</option>
                            <option value="company">기업</option>
                            <option value="edu">교육기관</option>
                        </select>
                        <select id="userStatusFilter">
                            <option value="all">전체 상태</option>
                            <option value="active">활성</option>
                            <option value="suspended">정지</option>
                            <option value="dormant">휴면</option>
                        </select>
                        <input type="text" placeholder="이름, 이메일, 회사명 검색...">
                        <button class="btn btn-secondary">검색</button>
                    </div>
                    <div class="bulk-actions">
                        <button class="btn btn-danger">일괄 정지</button>
                        <button class="btn btn-secondary">메일 발송</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="selectAllUsers"></th>
                                    <th>이름</th>
                                    <th>유형</th>
                                    <th>이메일</th>
                                    <th>상태</th>
                                    <th>가입일</th>
                                    <th>최종 접속</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- JS로 동적으로 채워짐 -->
                            </tbody>
                        </table>
                    </div>
                </section>
                <!-- ... (나머지 섹션도 동일하게 포함) ... -->

                <!-- 사용자 분석 리포트 섹션 -->
                <section id="reports-user-analysis" class="content-section">
                    <div class="section-header">
                        <h2>사용자 분석</h2>
                    </div>
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>전체 사용자 추이</h3>
                            <canvas id="userGrowthChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>일간 활성 사용자(DAU)</h3>
                            <canvas id="activeUserTrendChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 비즈니스 분석 리포트 섹션 -->
                <section id="reports-business" class="content-section">
                    <div class="section-header">
                        <h2>비즈니스 분석</h2>
                    </div>
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>월 수익 추이</h3>
                            <canvas id="revenueTrendChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>인증 유형별 매칭 건수</h3>
                            <canvas id="matchingCountChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 운영 리포트 섹션 -->
                <section id="reports-operations" class="content-section">
                    <div class="section-header">
                        <h2>운영 리포트</h2>
                    </div>
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>티켓 상태 분포</h3>
                            <canvas id="ticketStatusChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>시스템 가용성</h3>
                            <canvas id="systemUptimeChart"></canvas>
                        </div>
                    </div>
                </section>
                
                <!-- 전문가 관리 섹션 -->
                <section id="experts" class="content-section">
                    <div class="section-header">
                        <h2>전문가 관리</h2>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> 전문가 추가</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>이름</th>
                                    <th>분야</th>
                                    <th>인증 상태</th>
                                    <th>검증</th>
                                    <th>평점</th>
                                    <th>리뷰</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="expertTableBody">
                                <!-- JS로 동적으로 채워짐 -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- 기업 관리 섹션 -->
                <section id="companies" class="content-section">
                    <div class="section-header">
                        <h2>기업 관리</h2>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> 기업 추가</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>회사명</th>
                                    <th>담당자</th>
                                    <th>사업자 검증</th>
                                    <th>계정 수</th>
                                    <th>가입일</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="companyTableBody">
                                <!-- JS로 동적으로 채워짐 -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- 베너 관리 섹션 -->
                <section id="banners" class="content-section banner-management">
                    <div class="section-header">
                        <h2>베너 관리</h2>
                        <div class="actions">
                            <button class="btn btn-primary" onclick="openBannerModal()"><i class="fas fa-plus"></i> 베너 등록</button>
                            <button class="btn btn-secondary" id="deleteBannerBtn"><i class="fas fa-trash"></i> 선택 삭제</button>
                        </div>
                    </div>
                    <div class="section-grid">
                        <div class="card preview-section">
                            <h3>미리보기</h3>
                            <div class="preview-container" id="bannerPreview">
                                <div class="preview-slide" id="previewSlide">배너 미리보기</div>
                                <div class="preview-dots" id="previewDots"></div>
                            </div>
                        </div>
                        <div class="card calendar-section">
                            <h3>캘린더 및 슬롯</h3>
                            <div class="calendar-container">
                                <div class="calendar-header">
                                    <button class="btn btn-secondary" id="prevMonthBtn"><i class="fas fa-chevron-left"></i></button>
                                    <div id="calendarTitle">2024-07</div>
                                    <button class="btn btn-secondary" id="nextMonthBtn"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="calendar-grid" id="calendarGrid"></div>
                            </div>
                            <div class="banner-slots" id="bannerSlots"></div>
                        </div>
                    </div>
                </section>

                <!-- Q&A 관리 섹션 -->
                <section id="qa-management" class="content-section">
                    <div class="section-header">
                        <h2>Q&A 답변</h2>
                        <div class="actions">
                            <div class="filter-tabs" id="qaFilters">
                                <div class="filter-tab active" data-filter="all">전체</div>
                                <div class="filter-tab" data-filter="public">인증 Q&A</div>
                                <div class="filter-tab" data-filter="private">1:1 Q&A</div>
                                <div class="filter-tab" data-filter="unanswered">미답변</div>
                            </div>
                        </div>
                    </div>
                    <div class="table-container job-list">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>번호</th>
                                    <th>유형</th>
                                    <th>제목</th>
                                    <th>작성자</th>
                                    <th>상태</th>
                                    <th>등록일</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="qaTableBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- 공고 관리 섹션 -->
                <section id="job-management" class="content-section">
                    <div class="section-header">
                        <h2>공고 관리</h2>
                        <div class="actions">
                            <button class="btn btn-primary" id="openJobModalBtn"><i class="fas fa-plus"></i> 공고 등록</button>
                        </div>
                    </div>
                    <div class="table-container job-list">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>공고명</th>
                                    <th>카테고리</th>
                                    <th>담당자</th>
                                    <th>기간</th>
                                    <th>상태</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="jobTableBody"></tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- 관리자 추가/수정 Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">관리자 추가</h3>
                <span class="close" onclick="closeAdminModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="adminForm">
                    <input type="hidden" id="adminId">
                    <div class="form-group">
                        <label for="adminName">이름</label>
                        <input type="text" id="adminName" required>
                    </div>
                    <div class="form-group">
                        <label for="adminEmail">이메일</label>
                        <input type="email" id="adminEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="adminRole">역할</label>
                        <select id="adminRole" required>
                            <option value="super">최고 관리자</option>
                            <option value="general">일반 관리자</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="adminPassword">비밀번호</label>
                        <input type="password" id="adminPassword" placeholder="수정 시 비워두시면 기존 비밀번호를 유지합니다.">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAdminModal()">취소</button>
                <button type="button" class="btn btn-primary" onclick="saveAdminDetails()">저장</button>
            </div>
        </div>
    </div>

    <script>
        // --- JavaScript Code ---
        document.addEventListener('DOMContentLoaded', function() {
            // --- Mock Data ---
            const mockUsers = [
                { id: 1, name: '김민수', type: '전문가', email: 'kim@expert.com', status: 'active', joinDate: '2023-01-15', lastLogin: '2024-07-21' },
                { id: 2, name: '㈜테크솔루션', type: '기업', email: 'contact@techsol.com', status: 'active', joinDate: '2023-03-22', lastLogin: '2024-07-20' },
                { id: 3, name: '박지영', type: '전문가', email: 'park@pro.com', status: 'suspended', joinDate: '2023-05-10', lastLogin: '2024-06-15' },
                { id: 4, name: '한국IT교육원', type: '교육기관', email: 'info@kitedu.or.kr', status: 'active', joinDate: '2023-07-01', lastLogin: '2024-07-19' },
                { id: 5, name: '이준호', type: '전문가', email: 'lee.jh@security.io', status: 'dormant', joinDate: '2022-11-30', lastLogin: '2024-01-05' },
            ];

            const mockExperts = [
                { name: '김민수', field: 'ISMS-P', certStatus: '승인', credentials: '경력/자격증 검증 완료', rating: 4.9, reviews: 47 },
                { name: '박지영', field: 'ISO 27001', certStatus: '심사 중', credentials: '서류 제출', rating: 4.8, reviews: 32 },
                { name: '최서연', field: 'GS 인증', certStatus: '반려', credentials: '보류 (서류 부족)', rating: 4.7, reviews: 28 },
            ];

            const mockCompanies = [
                { name: '㈜테크솔루션', manager: '홍길동', businessCert: '검증 완료', accounts: 3, joinDate: '2023-03-22' },
                { name: '㈜클라우드테크', manager: '김철수', businessCert: '검증 중', accounts: 1, joinDate: '2024-01-10' },
                { name: '㈜핀테크코리아', manager: '이영희', businessCert: '검증 완료', accounts: 5, joinDate: '2023-09-05' },
            ];
            
            let mockAdmins = [
                { id: 1, name: '슈퍼관리자', email: 'super@admin.com', role: 'super', status: 'active', createdDate: '2022-01-01' },
                { id: 2, name: '김관리', email: 'kim@admin.com', role: 'general', status: 'active', createdDate: '2023-03-15' },
            ];

            // 콘텐츠 관리용 Mock Data
            let bannerData = [
                { id: 1, title: '여름 프로모션', period: '2024-07-01 ~ 2024-07-31', slot: '메인 상단', image: 'https://via.placeholder.com/640x200?text=Summer+Promo' },
                { id: 2, title: '보안 컨설팅 할인', period: '2024-07-15 ~ 2024-08-15', slot: '메인 중단', image: 'https://via.placeholder.com/640x200?text=Security+Consulting' },
                { id: 3, title: '신규 기업 혜택', period: '2024-08-01 ~ 2024-08-31', slot: '메인 하단', image: 'https://via.placeholder.com/640x200?text=New+Company+Benefits' },
            ];
            let qaData = [
                { id: 101, type: 'public', title: 'ISMS-P 인증 절차는?', author: '홍길동', status: 'answered', date: '2024-07-10' },
                { id: 102, type: 'private', title: '기업 보안 점검 요청', author: '김철수', status: 'unanswered', date: '2024-07-12' },
                { id: 103, type: 'public', title: 'ISO 27001 준비 기간?', author: '이영희', status: 'answered', date: '2024-07-14' },
            ];
            let jobData = [
                { title: 'ISMS-P 컨설턴트 채용', category: '채용', manager: '박팀장', period: '2024-07-01 ~ 2024-07-31', status: '진행중' },
                { title: '보안 점검 프로젝트 의뢰', category: '프로젝트', manager: '김매니저', period: '2024-07-20 ~ 2024-08-20', status: '대기' },
            ];

            // --- Navigation ---
            const navLinks = document.querySelectorAll('.nav-link, .sub-nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const pageTitle = document.querySelector('.page-title');

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('data-target');

                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetId) {
                            section.classList.add('active');
                            pageTitle.textContent = this.textContent.trim();
                        }
                    });
                });
            });

            // --- 콘텐츠 관리: 베너 미리보기/캘린더/슬롯 ---
            const previewDotsEl = document.getElementById('previewDots');
            const previewSlideEl = document.getElementById('previewSlide');
            const calendarGridEl = document.getElementById('calendarGrid');
            const calendarTitleEl = document.getElementById('calendarTitle');
            const bannerSlotsEl = document.getElementById('bannerSlots');

            let currentMonth = new Date(2024, 6, 1); // July 2024
            function renderPreviewDots() {
                if (!previewDotsEl) return;
                previewDotsEl.innerHTML = '';
                bannerData.forEach((b, idx) => {
                    const dot = document.createElement('div');
                    dot.className = 'preview-dot' + (idx === 0 ? ' active' : '');
                    dot.addEventListener('click', () => {
                        document.querySelectorAll('.preview-dot').forEach(d => d.classList.remove('active'));
                        dot.classList.add('active');
                        previewSlideEl.textContent = b.title;
                    });
                    previewDotsEl.appendChild(dot);
                });
                if (bannerData[0] && previewSlideEl) previewSlideEl.textContent = bannerData[0].title;
            }

            function renderCalendar(monthDate) {
                if (!calendarGridEl || !calendarTitleEl) return;
                const year = monthDate.getFullYear();
                const month = monthDate.getMonth();
                calendarTitleEl.textContent = `${year}-${String(month+1).padStart(2,'0')}`;
                calendarGridEl.innerHTML = '';
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                for (let i = 1; i <= lastDay.getDate(); i++) {
                    const day = document.createElement('div');
                    day.className = 'calendar-day';
                    day.textContent = i;
                    day.addEventListener('click', () => {
                        document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                        day.classList.add('selected');
                        updateBannerSlots();
                    });
                    calendarGridEl.appendChild(day);
                }
            }

            function updateBannerSlots() {
                if (!bannerSlotsEl) return;
                bannerSlotsEl.innerHTML = '';
                const slots = ['메인 상단', '메인 중단', '메인 하단'];
                slots.forEach((slotName) => {
                    const slot = document.createElement('div');
                    slot.className = 'banner-slot';
                    const assigned = bannerData.filter(b => b.slot === slotName);
                    slot.innerHTML = `
                        <h4>${slotName}</h4>
                        <div class="slot-body">${assigned.length ? assigned.map(a => a.title).join(', ') : '등록된 배너 없음'}</div>
                    `;
                    bannerSlotsEl.appendChild(slot);
                });
            }

            const prevMonthBtn = document.getElementById('prevMonthBtn');
            const nextMonthBtn = document.getElementById('nextMonthBtn');
            if (prevMonthBtn && nextMonthBtn) {
                prevMonthBtn.addEventListener('click', () => { currentMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth()-1, 1); renderCalendar(currentMonth); });
                nextMonthBtn.addEventListener('click', () => { currentMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth()+1, 1); renderCalendar(currentMonth); });
            }

            function openBannerModal() {
                alert('베너 등록 모달은 목업입니다.');
            }

            // --- 콘텐츠 관리: Q&A 목록 ---
            function populateQAList(filter = 'all') {
                const tbody = document.getElementById('qaTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                const filtered = qaData.filter(q => {
                    if (filter === 'all') return true;
                    if (filter === 'unanswered') return q.status === 'unanswered';
                    return q.type === filter;
                });
                filtered.forEach(item => {
                    const row = document.createElement('tr');
                    const statusBadge = item.status === 'answered' ? '<span class="status-badge status-success">답변완료</span>' : '<span class="status-badge status-warning">미답변</span>';
                    const typeLabel = item.type === 'public' ? '인증 Q&A' : '1:1 Q&A';
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${typeLabel}</td>
                        <td>${item.title}</td>
                        <td>${item.author}</td>
                        <td>${statusBadge}</td>
                        <td>${item.date}</td>
                        <td><button class="btn btn-secondary">관리</button></td>
                    `;
                    tbody.appendChild(row);
                });
            }

            const qaFilters = document.getElementById('qaFilters');
            if (qaFilters) {
                qaFilters.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        qaFilters.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        populateQAList(tab.getAttribute('data-filter'));
                    });
                });
            }

            // --- 콘텐츠 관리: 공고 목록 ---
            function populateJobList() {
                const tbody = document.getElementById('jobTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                jobData.forEach(job => {
                    const row = document.createElement('tr');
                    const statusBadge = job.status === '진행중' ? '<span class="status-badge status-success">진행중</span>' : '<span class="status-badge status-warning">대기</span>';
                    row.innerHTML = `
                        <td>${job.title}</td>
                        <td>${job.category}</td>
                        <td>${job.manager}</td>
                        <td>${job.period}</td>
                        <td>${statusBadge}</td>
                        <td class="job-actions">
                            <button class="btn btn-secondary">수정</button>
                            <button class="btn btn-danger">삭제</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            const openJobModalBtn = document.getElementById('openJobModalBtn');
            if (openJobModalBtn) {
                openJobModalBtn.addEventListener('click', () => alert('공고 등록 모달은 목업입니다.'));
            }

            // 초기 렌더링 호출
            renderPreviewDots();
            renderCalendar(currentMonth);
            updateBannerSlots();
            populateQAList('all');
            populateJobList();

            // --- Populate Tables ---
            function populateUserTable() {
                const tbody = document.getElementById('userTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                mockUsers.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><input type="checkbox" class="user-checkbox" data-id="${user.id}"></td>
                        <td>${user.name}</td>
                        <td>${user.type}</td>
                        <td>${user.email}</td>
                        <td><span class="status-badge ${user.status}">${getStatusText(user.status)}</span></td>
                        <td>${user.joinDate}</td>
                        <td>${user.lastLogin}</td>
                        <td>
                            <button class="btn btn-secondary btn-sm">관리</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
            function populateExpertTable() {
                const tbody = document.getElementById('expertTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                mockExperts.forEach(expert => {
                    const statusClass = expert.certStatus === '승인' ? 'verified'
                        : expert.certStatus === '심사 중' ? 'pending'
                        : 'rejected';
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${expert.name}</td>
                        <td>${expert.field}</td>
                        <td><span class="status-badge ${statusClass}">${expert.certStatus}</span></td>
                        <td>${expert.credentials}</td>
                        <td>${expert.rating}</td>
                        <td>${expert.reviews}</td>
                        <td>
                            <button class="btn btn-secondary btn-sm">관리</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            function populateCompanyTable() {
                const tbody = document.getElementById('companyTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                mockCompanies.forEach(company => {
                    const statusClass = company.businessCert === '검증 완료' ? 'verified'
                        : company.businessCert === '검증 중' ? 'pending'
                        : 'rejected';
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${company.name}</td>
                        <td>${company.manager}</td>
                        <td><span class="status-badge ${statusClass}">${company.businessCert}</span></td>
                        <td>${company.accounts}</td>
                        <td>${company.joinDate}</td>
                        <td>
                            <button class="btn btn-secondary btn-sm">관리</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
            
            function populateAdminTable() {
                const tbody = document.getElementById('adminTableBody');
                if (!tbody) return;
                tbody.innerHTML = '';
                mockAdmins.forEach(admin => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${admin.name}</td>
                        <td>${admin.email}</td>
                        <td>${admin.role === 'super' ? '최고 관리자' : '일반 관리자'}</td>
                        <td><span class="status-badge ${admin.status}">${getStatusText(admin.status)}</span></td>
                        <td>${admin.createdDate}</td>
                        <td>
                            <button class="btn btn-secondary btn-sm" onclick="editAdmin(${admin.id})">수정</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteAdmin(${admin.id})">삭제</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
            
            function getStatusText(status) {
                const statusMap = { active: '활성', suspended: '정지', dormant: '휴면' };
                return statusMap[status] || status;
            }

            // Initial population
            populateUserTable();
            populateExpertTable();
            populateCompanyTable();
            populateAdminTable();

            // --- Chart.js Initialization ---
            if (window.Chart) {
                Chart.defaults.font.family = "Segoe UI, Tahoma, Geneva, Verdana, sans-serif";
                Chart.defaults.color = '#343a40';

                // 대시보드: 가입자 추이
                const signupCtx = document.getElementById('signupTrendChart');
                if (signupCtx) {
                    new Chart(signupCtx, {
                        type: 'line',
                        data: {
                            labels: ['1월','2월','3월','4월','5월','6월','7월','8월'],
                            datasets: [{
                                label: '신규 가입자',
                                data: [120, 180, 150, 210, 260, 240, 300, 320],
                                borderColor: '#4a69bd',
                                backgroundColor: 'rgba(74,105,189,0.15)',
                                tension: 0.3,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: { legend: { display: true } },
                            scales: { y: { beginAtZero: true } }
                        }
                    });
                }

                // 대시보드: 사용자 유형 분포
                const userTypeCtx = document.getElementById('userTypeChart');
                if (userTypeCtx) {
                    new Chart(userTypeCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['전문가','기업','교육기관'],
                            datasets: [{
                                data: [45, 35, 20],
                                backgroundColor: ['#17a2b8','#4a69bd','#ffc107']
                            }]
                        },
                        options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
                    });
                }

                // 사용자 분석 리포트
                const userGrowthCtx = document.getElementById('userGrowthChart');
                if (userGrowthCtx) {
                    new Chart(userGrowthCtx, {
                        type: 'line',
                        data: {
                            labels: ['1월','2월','3월','4월','5월','6월','7월','8월'],
                            datasets: [{
                                label: '전체 사용자 수',
                                data: [9500, 9800, 10050, 10400, 10800, 11250, 11800, 12543],
                                borderColor: '#28a745',
                                tension: 0.25
                            }]
                        },
                        options: { responsive: true, scales: { y: { beginAtZero: false } } }
                    });
                }

                const activeUserTrendCtx = document.getElementById('activeUserTrendChart');
                if (activeUserTrendCtx) {
                    new Chart(activeUserTrendCtx, {
                        type: 'bar',
                        data: {
                            labels: ['월','화','수','목','금','토','일'],
                            datasets: [{
                                label: '일간 활성 사용자(DAU)',
                                data: [1200, 1350, 1280, 1420, 1500, 1100, 900],
                                backgroundColor: '#6c757d'
                            }]
                        },
                        options: { responsive: true, scales: { y: { beginAtZero: true } } }
                    });
                }

                // 비즈니스 분석 리포트
                const revenueTrendCtx = document.getElementById('revenueTrendChart');
                if (revenueTrendCtx) {
                    new Chart(revenueTrendCtx, {
                        type: 'line',
                        data: {
                            labels: ['1월','2월','3월','4월','5월','6월','7월','8월'],
                            datasets: [{
                                label: '월 수익(백만원)',
                                data: [150, 160, 175, 190, 210, 230, 260, 280],
                                borderColor: '#4a69bd',
                                backgroundColor: 'rgba(74,105,189,0.1)',
                                fill: true,
                                tension: 0.25
                            }]
                        },
                        options: { responsive: true, scales: { y: { beginAtZero: true } } }
                    });
                }

                const matchingCountCtx = document.getElementById('matchingCountChart');
                if (matchingCountCtx) {
                    new Chart(matchingCountCtx, {
                        type: 'bar',
                        data: {
                            labels: ['ISO27001','ISMS-P','GS 인증','기타'],
                            datasets: [{
                                label: '월간 매칭 건수',
                                data: [95, 120, 60, 46],
                                backgroundColor: ['#17a2b8','#28a745','#ffc107','#6c757d']
                            }]
                        },
                        options: { responsive: true, scales: { y: { beginAtZero: true } } }
                    });
                }

                // 운영 리포트
                const ticketStatusCtx = document.getElementById('ticketStatusChart');
                if (ticketStatusCtx) {
                    new Chart(ticketStatusCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['오픈','진행중','해결','대기'],
                            datasets: [{
                                data: [34, 18, 56, 7],
                                backgroundColor: ['#dc3545','#ffc107','#28a745','#6c757d']
                            }]
                        },
                        options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
                    });
                }

                const uptimeCtx = document.getElementById('systemUptimeChart');
                if (uptimeCtx) {
                    new Chart(uptimeCtx, {
                        type: 'line',
                        data: {
                            labels: ['월','화','수','목','금','토','일'],
                            datasets: [{
                                label: '시스템 가용성(%)',
                                data: [99.8, 99.9, 99.7, 99.9, 99.95, 99.6, 99.7],
                                borderColor: '#17a2b8',
                                tension: 0.2
                            }]
                        },
                        options: { responsive: true, scales: { y: { min: 95, max: 100 } } }
                    });
                }
            }

            // --- Admin Modal Functions ---
            const adminModal = document.getElementById('adminModal');
            const modalTitle = document.getElementById('modalTitle');
            const adminForm = document.getElementById('adminForm');

            window.openAdminModal = function() {
                modalTitle.textContent = '관리자 추가';
                adminForm.reset();
                document.getElementById('adminId').value = '';
                adminModal.style.display = 'block';
            }

            window.closeAdminModal = function() {
                adminModal.style.display = 'none';
            }

            window.editAdmin = function(id) {
                const admin = mockAdmins.find(a => a.id === id);
                if (admin) {
                    modalTitle.textContent = '관리자 수정';
                    document.getElementById('adminId').value = admin.id;
                    document.getElementById('adminName').value = admin.name;
                    document.getElementById('adminEmail').value = admin.email;
                    document.getElementById('adminRole').value = admin.role;
                    document.getElementById('adminPassword').value = ''; // 비밀번호는 표시하지 않음
                    adminModal.style.display = 'block';
                }
            }

            window.saveAdminDetails = function() {
                const id = document.getElementById('adminId').value;
                const name = document.getElementById('adminName').value;
                const email = document.getElementById('adminEmail').value;
                const role = document.getElementById('adminRole').value;
                const password = document.getElementById('adminPassword').value;

                if (!name || !email) {
                    alert('이름과 이메일을 입력해주세요.');
                    return;
                }

                if (id) { // Edit mode
                    const adminIndex = mockAdmins.findIndex(a => a.id == id);
                    if (adminIndex > -1) {
                        mockAdmins[adminIndex] = { ...mockAdmins[adminIndex], name, email, role };
                    }
                } else { // Add mode
                    if (!password) {
                        alert('신규 관리자 추가 시 비밀번호는 필수입니다.');
                        return;
                    }
                    const newAdmin = {
                        id: Date.now(), // Simple unique ID
                        name, email, role, password,
                        status: 'active',
                        createdDate: new Date().toISOString().split('T')[0]
                    };
                    mockAdmins.push(newAdmin);
                }

                populateAdminTable();
                closeAdminModal();
            }

            window.deleteAdmin = function(id) {
                if (confirm('정말로 이 관리자 계정을 삭제하시겠습니까?')) {
                    mockAdmins = mockAdmins.filter(a => a.id !== id);
                    populateAdminTable();
                }
            }
            
            // Close modal when clicking outside
            window.onclick = function(event) {
                if (event.target == adminModal) {
                    closeAdminModal();
                }
            }

            // --- Utility Functions ---
            window.downloadReport = function(type, format) { /* ... */ }
            window.scheduleEmailReport = function() { /* ... */ }
        });
    </script>
</body>
</html>