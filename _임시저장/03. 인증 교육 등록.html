<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CertMatch - 인증 교육 등록</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .form-container {
            padding: 20px;
            background-color: #f8f9fa;
            min-height: 100vh;
            padding-bottom: 100px;
        }
        
        .form-section {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: #4a6fdc;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .form-control:focus {
            border-color: #4a6fdc;
            outline: none;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            flex: 1;
            margin: 0 5px;
        }
        
        .btn-primary {
            background-color: #4a6fdc;
            color: white;
        }
        
        .btn-secondary {
            background-color: #e0e0e0;
            color: #333;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #e9ecef;
        }
        
        .radio-item input, .checkbox-item input {
            margin-right: 5px;
        }
        
        .dynamic-list {
            margin-top: 10px;
        }
        
        .list-item {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .list-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .list-item-title {
            font-weight: 500;
            color: #333;
        }
        
        .remove-item {
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
        }
        
        .add-item-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
        }
        
        .add-item-btn i {
            margin-right: 5px;
        }
        
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
        
        .toast.show {
            display: block;
        }
        
        .form-row {
            display: flex;
            gap: 10px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
    </style>
</head>
<body>
    <!-- App Header -->
    <header class="app-header">
        <div class="header-icon" id="backButton">
            <i class="fas fa-arrow-left"></i>
        </div>
        <div class="app-title">인증 교육 등록</div>
        <div class="header-icons">
            <div class="header-icon">
                <i class="fas fa-save" id="saveDraft"></i>
            </div>
        </div>
    </header>
    
    <!-- App Content -->
    <div class="app-content">
        <div class="form-container">
            <!-- 교육기관 정보 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-university"></i>
                    <span>교육기관 정보</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label">기관명 <span class="required">*</span></label>
                    <input type="text" class="form-control" id="institutionName" placeholder="교육기관명을 입력하세요">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">대표자명</label>
                        <input type="text" class="form-control" id="representativeName" placeholder="대표자명을 입력하세요">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">연락처 <span class="required">*</span></label>
                        <input type="tel" class="form-control" id="contactNumber" placeholder="연락처를 입력하세요">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">주소</label>
                    <input type="text" class="form-control" id="address" placeholder="주소를 입력하세요">
                </div>
                
                <div class="form-group">
                    <label class="form-label">기관 소개</label>
                    <textarea class="form-control" id="institutionIntro" rows="3" placeholder="교육기관에 대한 간단한 소개를 입력하세요"></textarea>
                </div>
            </div>
            
            <!-- 과정 정보 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-graduation-cap"></i>
                    <span>과정 정보</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label">과정명 <span class="required">*</span></label>
                    <input type="text" class="form-control" id="courseName" placeholder="교육 과정명을 입력하세요">
                </div>
                
                <div class="form-group">
                    <label class="form-label">교육 개요</label>
                    <textarea class="form-control" id="courseOverview" rows="3" placeholder="교육 과정에 대한 개요를 입력하세요"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">커리큘럼 <span class="required">*</span></label>
                    <textarea class="form-control" id="curriculum" rows="5" placeholder="교육 커리큘럼을 상세히 입력하세요&#10;예:&#10;1. 정보보호 개론&#10;2. 위협 분석 및 취약점 평가&#10;3. 보안 대책 수립&#10;..."></textarea>
                </div>
            </div>
            
            <!-- 교육 기간 및 방식 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-clock"></i>
                    <span>교육 기간 및 방식</span>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">총 교육 시간 <span class="required">*</span></label>
                        <input type="number" class="form-control" id="totalHours" placeholder="예: 40">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">교육 기간</label>
                        <input type="text" class="form-control" id="duration" placeholder="예: 4주, 3개월">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">교육 방식 <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="online" name="method" value="online">
                            <label for="online">온라인</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="offline" name="method" value="offline">
                            <label for="offline">오프라인</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="hybrid" name="method" value="hybrid">
                            <label for="hybrid">혼합</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">난이도 <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="beginner" name="level" value="beginner">
                            <label for="beginner">입문</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="intermediate" name="level" value="intermediate">
                            <label for="intermediate">중급</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="advanced" name="level" value="advanced">
                            <label for="advanced">고급</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 수강료 및 정원 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-won-sign"></i>
                    <span>수강료 및 정원</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label">수강료 <span class="required">*</span></label>
                    <input type="text" class="form-control" id="tuitionFee" placeholder="예: 350,000원">
                </div>
                
                <div class="form-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="governmentSupport" name="governmentSupport" value="yes">
                        <label for="governmentSupport">정부지원 가능</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">정원 <span class="required">*</span></label>
                    <input type="number" class="form-control" id="capacity" placeholder="모집 정원을 입력하세요">
                </div>
            </div>
            
            <!-- 일정 선택 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-calendar-alt"></i>
                    <span>일정 선택</span>
                </div>
                
                <div class="dynamic-list" id="scheduleList">
                    <!-- 일정 항목이 동적으로 추가됩니다 -->
                </div>
                
                <button class="add-item-btn" id="addScheduleBtn">
                    <i class="fas fa-plus"></i>
                    <span>일정 추가</span>
                </button>
            </div>
            
            <!-- 수료증 및 강사 정보 -->
            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-certificate"></i>
                    <span>수료증 및 강사 정보</span>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="certificateIssuance" name="certificateIssuance" value="yes">
                        <label for="certificateIssuance">수료증 발급</label>
                    </div>
                </div>
                
                <div class="dynamic-list" id="instructorList">
                    <!-- 강사 항목이 동적으로 추가됩니다 -->
                </div>
                
                <button class="add-item-btn" id="addInstructorBtn">
                    <i class="fas fa-plus"></i>
                    <span>강사 추가</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 제출 버튼 -->
    <div class="btn-container">
        <button class="btn btn-secondary" id="cancelBtn">취소</button>
        <button class="btn btn-primary" id="submitBtn">등록하기</button>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <script>
        let scheduleCount = 0;
        let instructorCount = 0;
        
        // 뒤로가기 버튼
        document.getElementById('backButton').addEventListener('click', function() {
            window.history.back();
        });
        
        // 임시 저장 버튼
        document.getElementById('saveDraft').addEventListener('click', function() {
            showToast('임시 저장되었습니다.');
        });
        
        // 일정 추가
        document.getElementById('addScheduleBtn').addEventListener('click', function() {
            scheduleCount++;
            const scheduleList = document.getElementById('scheduleList');
            
            const scheduleItem = document.createElement('div');
            scheduleItem.className = 'list-item';
            scheduleItem.id = `schedule_${scheduleCount}`;
            
            scheduleItem.innerHTML = `
                <div class="list-item-header">
                    <div class="list-item-title">일정 ${scheduleCount}</div>
                    <i class="fas fa-times remove-item" onclick="removeItem('schedule_${scheduleCount}')"></i>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">시작일</label>
                        <input type="date" class="form-control" name="startDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label">종료일</label>
                        <input type="date" class="form-control" name="endDate">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">요일/시간</label>
                    <input type="text" class="form-control" name="timeSlot" placeholder="예: 월/수/금 19:00-22:00">
                </div>
            `;
            
            scheduleList.appendChild(scheduleItem);
        });
        
        // 강사 추가
        document.getElementById('addInstructorBtn').addEventListener('click', function() {
            instructorCount++;
            const instructorList = document.getElementById('instructorList');
            
            const instructorItem = document.createElement('div');
            instructorItem.className = 'list-item';
            instructorItem.id = `instructor_${instructorCount}`;
            
            instructorItem.innerHTML = `
                <div class="list-item-header">
                    <div class="list-item-title">강사 ${instructorCount}</div>
                    <i class="fas fa-times remove-item" onclick="removeItem('instructor_${instructorCount}')"></i>
                </div>
                <div class="form-group">
                    <label class="form-label">강사명</label>
                    <input type="text" class="form-control" name="instructorName" placeholder="강사명을 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">주요 경력</label>
                    <textarea class="form-control" name="instructorCareer" rows="2" placeholder="주요 경력 및 전문 분야를 입력하세요"></textarea>
                </div>
            `;
            
            instructorList.appendChild(instructorItem);
        });
        
        // 항목 제거
        function removeItem(itemId) {
            const item = document.getElementById(itemId);
            if (item) {
                item.remove();
            }
        }
        
        // 취소 버튼
        document.getElementById('cancelBtn').addEventListener('click', function() {
            if (confirm('작성 중인 내용이 저장되지 않습니다. 취소하시겠습니까?')) {
                window.history.back();
            }
        });
        
        // 제출 버튼
        document.getElementById('submitBtn').addEventListener('click', function() {
            // 필수 필드 검증
            const requiredFields = [
                'institutionName', 'contactNumber', 'courseName', 
                'curriculum', 'totalHours', 'tuitionFee', 'capacity'
            ];
            
            let isValid = true;
            let firstInvalidField = null;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value) {
                    isValid = false;
                    field.style.borderColor = '#e74c3c';
                    if (!firstInvalidField) {
                        firstInvalidField = field;
                    }
                } else {
                    field.style.borderColor = '#ddd';
                }
            });
            
            // 라디오 버튼 검증
            const methodSelected = document.querySelector('input[name="method"]:checked');
            const levelSelected = document.querySelector('input[name="level"]:checked');
            
            if (!methodSelected || !levelSelected) {
                isValid = false;
                showToast('교육 방식과 난이도를 선택해주세요.');
                return;
            }
            
            // 일정 및 강사 검증
            const schedules = document.querySelectorAll('#scheduleList .list-item');
            const instructors = document.querySelectorAll('#instructorList .list-item');
            
            if (schedules.length === 0) {
                isValid = false;
                showToast('최소 하나 이상의 일정을 추가해주세요.');
                return;
            }
            
            if (instructors.length === 0) {
                isValid = false;
                showToast('최소 한 명 이상의 강사를 추가해주세요.');
                return;
            }
            
            if (!isValid) {
                showToast('필수 항목을 모두 입력해주세요.');
                if (firstInvalidField) {
                    firstInvalidField.focus();
                }
                return;
            }
            
            // 폼 데이터 수집
            const formData = {
                institution: {
                    name: document.getElementById('institutionName').value,
                    representative: document.getElementById('representativeName').value,
                    contact: document.getElementById('contactNumber').value,
                    address: document.getElementById('address').value,
                    intro: document.getElementById('institutionIntro').value
                },
                course: {
                    name: document.getElementById('courseName').value,
                    overview: document.getElementById('courseOverview').value,
                    curriculum: document.getElementById('curriculum').value
                },
                details: {
                    totalHours: document.getElementById('totalHours').value,
                    duration: document.getElementById('duration').value,
                    method: methodSelected.value,
                    level: levelSelected.value
                },
                fee: {
                    tuition: document.getElementById('tuitionFee').value,
                    governmentSupport: document.getElementById('governmentSupport').checked,
                    capacity: document.getElementById('capacity').value
                },
                schedules: [],
                instructors: [],
                certificate: document.getElementById('certificateIssuance').checked
            };
            
            // 일정 데이터 수집
            schedules.forEach(schedule => {
                formData.schedules.push({
                    startDate: schedule.querySelector('input[name="startDate"]').value,
                    endDate: schedule.querySelector('input[name="endDate"]').value,
                    timeSlot: schedule.querySelector('input[name="timeSlot"]').value
                });
            });
            
            // 강사 데이터 수집
            instructors.forEach(instructor => {
                formData.instructors.push({
                    name: instructor.querySelector('input[name="instructorName"]').value,
                    career: instructor.querySelector('textarea[name="instructorCareer"]').value
                });
            });
            
            // 실제로는 서버에 데이터 전송
            console.log('Form Data:', formData);
            
            // 성공 메시지 표시
            showToast('교육 과정이 성공적으로 등록되었습니다.');
            
            // 잠시 후 목록 페이지로 이동
            setTimeout(() => {
                window.location.href = 'apphome.html';
            }, 2000);
        });
        
        // 토스트 메시지 표시 함수
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // 페이지 로드 시 기본 일정 및 강사 추가
        window.addEventListener('load', function() {
            // 기본 일정 하나 추가
            document.getElementById('addScheduleBtn').click();
            
            // 기본 강사 하나 추가
            document.getElementById('addInstructorBtn').click();
        });
    </script>
</body>
</html>