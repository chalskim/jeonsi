<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ë¬¸ê°€ ì„œë¹„ìŠ¤ ê²°ì œ ê´€ë¦¬ - SuperSlice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 16px;
        }

        .user-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .user-details {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }

        .user-info h2 {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }

        .service-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .service-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .service-tab.active {
            background: #3498db;
            color: white;
        }

        .service-tab:hover:not(.active) {
            background: #ecf0f1;
        }

        .service-section {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .service-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .upgrade-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .upgrade-card.recommended {
            border-color: #e74c3c;
            position: relative;
            overflow: hidden;
        }

        .recommended-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #e74c3c;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .upgrade-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .upgrade-price {
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
        }

        .upgrade-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .upgrade-features li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #34495e;
        }

        .upgrade-features .icon {
            color: #27ae60;
        }

        .payment-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .payment-info {
            flex: 1;
        }

        .payment-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .payment-date {
            font-size: 14px;
            color: #7f8c8d;
        }

        .payment-amount {
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
            margin-right: 16px;
        }

        .payment-status {
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .payment-status.paid {
            background: #d4edda;
            color: #155724;
        }

        .payment-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .payment-status.overdue {
            background: #f8d7da;
            color: #721c24;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .coupon-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .coupon-input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .coupon-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 14px;
        }

        .coupon-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .coupon-list {
            display: grid;
            gap: 12px;
        }

        .coupon-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #dee2e6;
        }

        .coupon-item.available {
            border-color: #28a745;
            background: #d4edda;
        }

        .coupon-item.used {
            opacity: 0.6;
            border-color: #6c757d;
        }

        .coupon-details {
            flex: 1;
        }

        .coupon-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .coupon-description {
            font-size: 14px;
            color: #7f8c8d;
        }

        .coupon-discount {
            font-size: 18px;
            font-weight: bold;
            color: #27ae60;
        }

        .total-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .total-row:last-child {
            border-bottom: none;
            padding-top: 16px;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .discount-row {
            color: #27ae60;
        }

        .total-amount {
            color: #e74c3c;
            font-size: 24px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            color: #7f8c8d;
            font-size: 16px;
        }

        .payment-methods {
            display: grid;
            gap: 12px;
            margin-bottom: 24px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 16px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: #3498db;
        }

        .payment-method.selected {
            border-color: #3498db;
            background: #ecf0f1;
        }

        .payment-method-icon {
            width: 40px;
            height: 40px;
            background: #ecf0f1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 20px;
        }

        .payment-method-info {
            flex: 1;
        }

        .payment-method-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .payment-method-desc {
            font-size: 14px;
            color: #7f8c8d;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .service-tabs {
                flex-direction: column;
            }

            .user-info {
                flex-direction: column;
                text-align: center;
            }

            .upgrade-header {
                flex-direction: column;
                gap: 12px;
            }

            .payment-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .coupon-input-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ì „ë¬¸ê°€ ì„œë¹„ìŠ¤ ê²°ì œ ê´€ë¦¬</h1>
            <p>ì „ë¬¸ê°€ ë“±ë¡, ì¶”ì²œ ì „ë¬¸ê°€ ì—…ê·¸ë ˆì´ë“œ, êµìœ¡ë¹„ ê²°ì œë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
        </div>

        <!-- Service Tabs -->
        <div class="service-tabs">
            <div class="service-tab active" data-service="upgrade">ì „ë¬¸ê°€ ë“±ë¡</div>
            <div class="service-tab" data-service="subscription">êµ¬ë… ì„œë¹„ìŠ¤</div>
            <div class="service-tab" data-service="coupons">ì¿ í° ê´€ë¦¬</div>
            <div class="service-tab" data-service="history">ê²°ì œ ë‚´ì—­</div>
        </div>

        <!-- ì „ë¬¸ê°€ ë“±ë¡ ì„¹ì…˜ -->
        <div class="service-section active" id="upgrade-section">
            <h3 class="section-title">
                <span>â­</span>
                <span>ì¶”ì²œ ì „ë¬¸ê°€ ë“±ë¡</span>
            </h3>

            <div class="upgrade-card">
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì „ë¬¸ê°€ ê¸°ë³¸ ë“±ë¡</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">ê¸°ë³¸ ì „ë¬¸ê°€ í”„ë¡œí•„ ë“±ë¡</div>
                    </div>
                    <div class="upgrade-price">ë¬´ë£Œ</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ê¸°ë³¸ í”„ë¡œí•„ ìƒì„±</li>
                    <li><span class="icon">âœ“</span>ê°„ë‹¨ ì»¨ì„¤íŒ… ìˆ˜ì‹ </li>
                    <li><span class="icon">âœ“</span>ê¸°ë³¸ ê²€ìƒ‰ ë…¸ì¶œ</li>
                </ul>
                <button class="btn btn-primary" onclick="showUpgradeModal('basic')">ì‹ ì²­í•˜ê¸°</button>
            </div>

            <div class="upgrade-card recommended">
                <div class="recommended-badge">ê°€ì¥ ì¸ê¸°</div>
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì¶”ì²œ ì „ë¬¸ê°€ ë“±ë¡</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">í”„ë¦¬ë¯¸ì—„ ì „ë¬¸ê°€ ë“±ë¡ ë° ê²€ì¦</div>
                    </div>
                    <div class="upgrade-price">â‚©150,000</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>í”„ë¦¬ë¯¸ì—„ í”„ë¡œí•„ ìƒì„±</li>
                    <li><span class="icon">âœ“</span>'ì¶”ì²œ ì „ë¬¸ê°€' ë±ƒì§€ í‘œì‹œ</li>
                    <li><span class="icon">âœ“</span>ìƒìœ„ ê²€ìƒ‰ ê²°ê³¼ ë…¸ì¶œ</li>
                    <li><span class="icon">âœ“</span>ì „ë¬¸ê°€ ì‹ ì› ê²€ì¦</li>
                    <li><span class="icon">âœ“</span>ìš°ì„  ì»¨ì„¤íŒ… ì—°ê²°</li>
                    <li><span class="icon">âœ“</span>ì›”ê°„ ì„±ê³¼ ë¶„ì„ ë¦¬í¬íŠ¸</li>
                </ul>
                <button class="btn btn-success" onclick="showUpgradeModal('premium')">ì§€ê¸ˆ ë“±ë¡</button>
            </div>

            <div class="upgrade-card">
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì „ë¬¸ê°€ ë“±ë¡ + êµìœ¡ íŒ¨í‚¤ì§€</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">ì „ë¬¸ê°€ ë“±ë¡ + êµìœ¡ë¹„ í• ì¸</div>
                    </div>
                    <div class="upgrade-price">â‚©300,000</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ì¶”ì²œ ì „ë¬¸ê°€ ëª¨ë“  í˜œíƒ</li>
                    <li><span class="icon">âœ“</span>ì„ íƒ êµìœ¡ 3ê°œ ê³¼ì • ë¬´ë£Œ</li>
                    <li><span class="icon">âœ“</span>1:1 ì „ë¬¸ê°€ ë©˜í† ë§ (3íšŒ)</li>
                    <li><span class="icon">âœ“</span>ì»¨ì„¤íŒ… ê³„ì•½ì„œ í…œí”Œë¦¿ ì œê³µ</li>
                    <li><span class="icon">âœ“</span>ë§ˆì¼€íŒ… ìë£Œ ì œê³µ</li>
                </ul>
                <button class="btn btn-warning" onclick="showUpgradeModal('package')">íŒ¨í‚¤ì§€ ì‹ ì²­</button>
            </div>
        </div>

        <!-- êµ¬ë… ì„œë¹„ìŠ¤ ì„¹ì…˜ -->
        <div class="service-section" id="subscription-section">
            <h3 class="section-title">
                <span>ğŸ“</span>
                <span>ì „ë¬¸ê°€ êµ¬ë… ì„œë¹„ìŠ¤</span>
            </h3>

            <div class="coupon-section">
                <div style="margin-bottom: 16px;">
                    <label style="font-weight: 500; color: #2c3e50; display: block; margin-bottom: 8px;">êµ¬ë… ì¿ í° ì ìš©</label>
                    <div class="coupon-input-group">
                        <input type="text" class="coupon-input" id="subscriptionCoupon" placeholder="ì¿ í° ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                        <button class="btn btn-primary" onclick="applySubscriptionCoupon()">ì¿ í° ì ìš©</button>
                    </div>
                </div>
                <div id="subscriptionCouponMessage" style="display: none; padding: 12px; border-radius: 8px; margin-bottom: 16px;"></div>
            </div>

            <!-- ë² ì´ì§ í”Œëœ -->
            <div class="upgrade-card">
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì „ë¬¸ê°€ ë² ì´ì§ í”Œëœ</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">ì›”ê°„ ìµœì‹  ì •ë³´ ë° êµìœ¡ ìë£Œ ì œê³µ</div>
                    </div>
                    <div class="upgrade-price">â‚©30,000/ì›”</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ì›”ê°„ ìµœì‹  ê¸°ìˆ  ë™í–¥ ë‰´ìŠ¤ë ˆí„°</li>
                    <li><span class="icon">âœ“</span>êµìœ¡ ìë£Œ ë° í…œí”Œë¦¿ ë¬´ë£Œ ë‹¤ìš´ë¡œë“œ</li>
                    <li><span class="icon">âœ“</span>ì˜¨ë¼ì¸ ì»¤ë®¤ë‹ˆí‹° ì ‘ê·¼ ê°€ëŠ¥</li>
                    <li><span class="icon">âœ“</span>ì›”ê°„ ì „ë¬¸ê°€ í¬ëŸ¼ ì°¸ì—¬</li>
                </ul>
                <button class="btn btn-primary" onclick="showSubscriptionModal('basic')">êµ¬ë…í•˜ê¸°</button>
            </div>

            <!-- ìŠ¤íƒ ë‹¤ë“œ í”Œëœ -->
            <div class="upgrade-card recommended">
                <div class="recommended-badge">ê°€ì¥ ì¸ê¸°</div>
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì „ë¬¸ê°€ ìŠ¤íƒ ë‹¤ë“œ í”Œëœ</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">ì¢…í•© ì „ë¬¸ê°€ ìœ¡ì„± í”„ë¡œê·¸ë¨</div>
                    </div>
                    <div class="upgrade-price">â‚©80,000/ì›”</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ë² ì´ì§ í”Œëœ ëª¨ë“  í˜œíƒ</li>
                    <li><span class="icon">âœ“</span>ì›”ê°„ ì˜¨ë¼ì¸ êµìœ¡ (4ì‹œê°„)</li>
                    <li><span class="icon">âœ“</span>1:1 ë©˜í† ë§ (ì›” 1íšŒ)</li>
                    <li><span class="icon">âœ“</span>ì „ë¬¸ê°€ ì„±ê³¼ ë¶„ì„ ë¦¬í¬íŠ¸</li>
                    <li><span class="icon">âœ“</span>êµ¬ë…ì ì „ìš© êµìœ¡ ìë£Œ</li>
                    <li><span class="icon">âœ“</span>'ì „ë¬¸ê°€ ì¸ì¦' ë±ƒì§€ í‘œì‹œ</li>
                </ul>
                <button class="btn btn-success" onclick="showSubscriptionModal('standard')">ì§€ê¸ˆ êµ¬ë…</button>
            </div>

            <!-- í”„ë¦¬ë¯¸ì—„ í”Œëœ -->
            <div class="upgrade-card">
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ì „ë¬¸ê°€ í”„ë¦¬ë¯¸ì—„ í”Œëœ</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">VIP ì „ë¬¸ê°€ ì¢…í•© ì§€ì›</div>
                    </div>
                    <div class="upgrade-price">â‚©150,000/ì›”</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ìŠ¤íƒ ë‹¤ë“œ í”Œëœ ëª¨ë“  í˜œíƒ</li>
                    <li><span class="icon">âœ“</span>ì›”ê°„ ì˜¨ë¼ì¸ êµìœ¡ (8ì‹œê°„)</li>
                    <li><span class="icon">âœ“</span>1:1 ë©˜í† ë§ (ì›” 2íšŒ)</li>
                    <li><span class="icon">âœ“</span>ì „ë‹´ ì»¨ì„¤íŒ… ë§¤ë‹ˆì € ë°°ì •</li>
                    <li><span class="icon">âœ“</span>êµ¬ë…ì ì „ìš© ì»¨ì„¤íŒ… ì—°ê²°</li>
                    <li><span class="icon">âœ“</span>VIP êµìœ¡ ìë£Œ ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
                    <li><span class="icon">âœ“</span>ì—°ê°„ ì»¨í¼ëŸ°ìŠ¤ ë¬´ë£Œ ì°¸ì„</li>
                </ul>
                <button class="btn btn-warning" onclick="showSubscriptionModal('premium')">í”„ë¦¬ë¯¸ì—„ êµ¬ë…</button>
            </div>

            <!-- ê°œë³„ êµìœ¡ êµ¬ë… -->
            <div class="upgrade-card">
                <div class="upgrade-header">
                    <div>
                        <div class="upgrade-title">ê°œë³„ êµìœ¡ ê³¼ì • êµ¬ë…</div>
                        <div style="color: #7f8c8d; font-size: 14px; margin-top: 4px;">í•„ìš”í•œ ê³¼ì •ë§Œ ì„ íƒí•˜ì—¬ êµ¬ë…</div>
                    </div>
                    <div class="upgrade-price">ê³¼ì •ë³„ ê°€ê²©</div>
                </div>
                <ul class="upgrade-features">
                    <li><span class="icon">âœ“</span>ISMS-P ì „ë¬¸ê°€ ê³¼ì •: â‚©45,000/ì›”</li>
                    <li><span class="icon">âœ“</span>ê°œì¸ì •ë³´ë³´í˜¸ ê³¼ì •: â‚©35,000/ì›”</li>
                    <li><span class="icon">âœ“</span>ISO 27001 ê³¼ì •: â‚©60,000/ì›”</li>
                    <li><span class="icon">âœ“</span>í’ˆì§ˆê²½ì˜ ê³¼ì •: â‚©25,000/ì›”</li>
                    <li><span class="icon">âœ“</span>ìˆ˜ê°• ê¸°ê°„ ìœ ì—°ì„±</li>
                </ul>
                <button class="btn btn-primary" onclick="showSubscriptionModal('custom')">ê³¼ì • ì„ íƒ</button>
            </div>

            <!-- êµ¬ë… ìš”ì•½ -->
            <div class="total-section">
                <div class="total-row">
                    <span>ì„ íƒ êµ¬ë… ìˆ˜</span>
                    <span id="selectedSubscriptions">0ê°œ</span>
                </div>
                <div class="total-row">
                    <span>ì›” êµ¬ë…ë£Œ</span>
                    <span id="monthlyTotal">â‚©0</span>
                </div>
                <div class="total-row discount-row" id="subscriptionDiscountRow" style="display: none;">
                    <span>ì¿ í° í• ì¸</span>
                    <span id="subscriptionDiscountAmount">-â‚©0</span>
                </div>
                <div class="total-row">
                    <span>ì›” ë‚©ë¶€ê¸ˆì•¡</span>
                    <span class="total-amount" id="finalMonthlyAmount">â‚©0</span>
                </div>
            </div>
        </div>

        <!-- ì¿ í° ê´€ë¦¬ ì„¹ì…˜ -->
        <div class="service-section" id="coupons-section">
            <h3 class="section-title">
                <span>ğŸ«</span>
                <span>ë‚˜ì˜ ì¿ í°</span>
            </h3>

            <div class="coupon-list">
                <div class="coupon-item available">
                    <div class="coupon-details">
                        <div class="coupon-name">ì‹ ê·œ ì „ë¬¸ê°€ ì›°ì»´ ì¿ í°</div>
                        <div class="coupon-description">ì¶”ì²œ ì „ë¬¸ê°€ ë“±ë¡ ì‹œ 20% í• ì¸ (3ê°œì›” ë‚´ ì‚¬ìš© ê°€ëŠ¥)</div>
                    </div>
                    <div class="coupon-discount">-20%</div>
                    <button class="btn btn-primary" style="margin-left: 16px;">ì‚¬ìš©í•˜ê¸°</button>
                </div>

                <div class="coupon-item available">
                    <div class="coupon-details">
                        <div class="coupon-name">êµìœ¡ë¹„ 10% í• ì¸ ì¿ í°</div>
                        <div class="coupon-description">ëª¨ë“  êµìœ¡ ê³¼ì • 10% í• ì¸ (6ê°œì›” ë‚´ ì‚¬ìš© ê°€ëŠ¥)</div>
                    </div>
                    <div class="coupon-discount">-10%</div>
                    <button class="btn btn-primary" style="margin-left: 16px;">ì‚¬ìš©í•˜ê¸°</button>
                </div>

                <div class="coupon-item used">
                    <div class="coupon-details">
                        <div class="coupon-name">ì²« ê²°ì œ 15% í• ì¸</div>
                        <div class="coupon-description">ì‚¬ìš© ì™„ë£Œ - 2024ë…„ 10ì›” 15ì¼</div>
                    </div>
                    <div class="coupon-discount" style="color: #6c757d;">-15%</div>
                    <button class="btn" style="margin-left: 16px; background: #6c757d; color: white;" disabled>ì‚¬ìš©ë¨</button>
                </div>
            </div>
        </div>

        <!-- ê²°ì œ ë‚´ì—­ ì„¹ì…˜ -->
        <div class="service-section" id="history-section">
            <h3 class="section-title">
                <span>ğŸ“‹</span>
                <span>ê²°ì œ ë‚´ì—­</span>
            </h3>

            <div class="payment-item">
                <div class="payment-info">
                    <div class="payment-title">ì¶”ì²œ ì „ë¬¸ê°€ ë“±ë¡ë¹„</div>
                    <div class="payment-date">2024ë…„ 10ì›” 15ì¼ | ì‹ ìš©ì¹´ë“œ</div>
                </div>
                <div class="payment-amount">â‚©150,000</div>
                <span class="payment-status paid">ê²°ì œ ì™„ë£Œ</span>
            </div>

            <div class="payment-item">
                <div class="payment-info">
                    <div class="payment-title">í’ˆì§ˆê²½ì˜ ì „ë¬¸ê°€ ê³¼ì •</div>
                    <div class="payment-date">2024ë…„ 9ì›” 20ì¼ | ê³„ì¢Œì´ì²´</div>
                </div>
                <div class="payment-amount">â‚©380,000</div>
                <span class="payment-status paid">ê²°ì œ ì™„ë£Œ</span>
            </div>

            <div class="payment-item">
                <div class="payment-info">
                    <div class="payment-title">ì»¨ì„¤íŒ… ê³„ì•½ì„œ í…œí”Œë¦¿</div>
                    <div class="payment-date">2024ë…„ 8ì›” 10ì¼ | ì‹ ìš©ì¹´ë“œ</div>
                </div>
                <div class="payment-amount">â‚©50,000</div>
                <span class="payment-status paid">ê²°ì œ ì™„ë£Œ</span>
            </div>
        </div>
    </div>

    <!-- ê²°ì œ ëª¨ë‹¬ -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">ê²°ì œ ì •ë³´</div>
                <div class="modal-subtitle" id="paymentSubtitle">ì•ˆì „í•œ ê²°ì œ ì‹œìŠ¤í…œì„ í†µí•´ ê²°ì œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤</div>
            </div>

            <div class="success-message" id="successMessage" style="display: none;">
                ê²°ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
            </div>

            <div id="paymentForm">
                <div class="form-group">
                    <label class="form-label">ê²°ì œ ë°©ì‹ ì„ íƒ</label>
                    <div class="payment-methods">
                        <div class="payment-method selected" data-method="card">
                            <div class="payment-method-icon">ğŸ’³</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ì‹ ìš©ì¹´ë“œ/ì²´í¬ì¹´ë“œ</div>
                                <div class="payment-method-desc">ì•ˆì „í•œ ì¹´ë“œ ê²°ì œ</div>
                            </div>
                        </div>
                        <div class="payment-method" data-method="transfer">
                            <div class="payment-method-icon">ğŸ¦</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ê³„ì¢Œì´ì²´</div>
                                <div class="payment-method-desc">ë¬´í†µì¥ì…ê¸ˆ ë˜ëŠ” ì˜¨ë¼ì¸ ì´ì²´</div>
                            </div>
                        </div>
                        <div class="payment-method" data-method="kakao">
                            <div class="payment-method-icon">ğŸ’¬</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ì¹´ì¹´ì˜¤í˜ì´</div>
                                <div class="payment-method-desc">ê°„í¸í•œ ëª¨ë°”ì¼ ê²°ì œ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ê²°ì œ ê¸ˆì•¡</label>
                    <input type="text" class="form-input" id="paymentAmount" readonly style="font-size: 18px; font-weight: bold;">
                </div>

                <div class="form-group">
                    <label class="form-label">ì´ë©”ì¼ ì£¼ì†Œ</label>
                    <input type="email" class="form-input" placeholder="ì˜ìˆ˜ì¦ ë°œì†¡ìš© ì´ë©”ì¼" value="expert@example.com">
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn" onclick="closePaymentModal()">ì·¨ì†Œ</button>
                <button class="btn btn-success" onclick="processPayment()">ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ì„œë¹„ìŠ¤ íƒ­ ì „í™˜
        const serviceTabs = document.querySelectorAll('.service-tab');
        const serviceSections = document.querySelectorAll('.service-section');

        serviceTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const service = tab.getAttribute('data-service');

                // íƒ­ í™œì„±í™”
                serviceTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // ì„¹ì…˜ í‘œì‹œ
                serviceSections.forEach(section => section.classList.remove('active'));
                document.getElementById(`${service}-section`).classList.add('active');
            });
        });

        // ê²°ì œ ëª¨ë‹¬
        function showPaymentModal(course) {
            const modal = document.getElementById('paymentModal');
            const subtitle = document.getElementById('paymentSubtitle');
            const amount = document.getElementById('paymentAmount');

            const courses = {
                'ism': { name: 'ISMS-P ì¸ì¦ ì „ë¬¸ê°€ ê³¼ì •', price: 450000 },
                'pippa': { name: 'ê°œì¸ì •ë³´ë³´í˜¸ ì „ë¬¸ê°€ ì–‘ì„± ê³¼ì •', price: 350000 },
                'iso': { name: 'ISO 27001 ì‹¬ì‚¬ì› ê³¼ì •', price: 600000 }
            };

            const courseInfo = courses[course];
            subtitle.textContent = courseInfo.name;
            amount.value = `â‚©${courseInfo.price.toLocaleString()}`;

            modal.classList.add('active');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('paymentForm').style.display = 'block';
        }

        function processPayment() {
            const form = document.getElementById('paymentForm');
            const successMessage = document.getElementById('successMessage');

            // ê²°ì œ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
            form.style.display = 'none';
            successMessage.style.display = 'block';

            // 3ì´ˆ í›„ ëª¨ë‹¬ ë‹«ê¸°
            setTimeout(() => {
                closePaymentModal();
            }, 3000);
        }

        // ì „ë¬¸ê°€ ë“±ê¸‰ì—… ëª¨ë‹¬
        function showUpgradeModal(type) {
            const modal = document.getElementById('paymentModal');
            const subtitle = document.getElementById('paymentSubtitle');
            const amount = document.getElementById('paymentAmount');

            const packages = {
                'basic': { name: 'ì „ë¬¸ê°€ ê¸°ë³¸ ë“±ë¡', price: 0 },
                'premium': { name: 'ì¶”ì²œ ì „ë¬¸ê°€ ë“±ë¡', price: 150000 },
                'package': { name: 'ì „ë¬¸ê°€ ë“±ë¡ + êµìœ¡ íŒ¨í‚¤ì§€', price: 300000 }
            };

            const packageInfo = packages[type];
            subtitle.textContent = packageInfo.name;
            amount.value = packageInfo.price > 0 ? `â‚©${packageInfo.price.toLocaleString()}` : 'ë¬´ë£Œ';

            modal.classList.add('active');
        }

        // ì¿ í° ì ìš©
        function applyCoupon() {
            const couponCode = document.getElementById('couponCode').value.trim();
            const messageDiv = document.getElementById('couponMessage');
            const discountRow = document.getElementById('discountRow');
            const discountAmount = document.getElementById('discountAmount');
            const finalAmount = document.getElementById('finalAmount');

            if (!couponCode) {
                messageDiv.textContent = 'ì¿ í° ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                messageDiv.style.background = '#f8d7da';
                messageDiv.style.color = '#721c24';
                messageDiv.style.display = 'block';
                return;
            }

            // ì¿ í° ìœ íš¨ì„± ê²€ì‚¬ (ì˜ˆì‹œ)
            if (couponCode === 'WELCOME2024') {
                const discount = 45000; // 10% í• ì¸
                const originalAmount = 450000;
                const newAmount = originalAmount - discount;

                messageDiv.textContent = 'ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤! 10% í• ì¸ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.';
                messageDiv.style.background = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.display = 'block';

                discountRow.style.display = 'flex';
                discountAmount.textContent = `-â‚©${discount.toLocaleString()}`;
                finalAmount.textContent = `â‚©${newAmount.toLocaleString()}`;
            } else if (couponCode === 'EXPERT10') {
                const discount = 35000; // 10% í• ì¸
                const originalAmount = 350000;
                const newAmount = originalAmount - discount;

                messageDiv.textContent = 'ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤! 10% í• ì¸ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.';
                messageDiv.style.background = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.display = 'block';

                discountRow.style.display = 'flex';
                discountAmount.textContent = `-â‚©${discount.toLocaleString()}`;
                finalAmount.textContent = `â‚©${newAmount.toLocaleString()}`;
            } else {
                messageDiv.textContent = 'ìœ íš¨í•˜ì§€ ì•Šì€ ì¿ í° ì½”ë“œì…ë‹ˆë‹¤.';
                messageDiv.style.background = '#f8d7da';
                messageDiv.style.color = '#721c24';
                messageDiv.style.display = 'block';
            }
        }

        // ê²°ì œ ë°©ì‹ ì„ íƒ
        document.querySelectorAll('.payment-method').forEach(method => {
            method.addEventListener('click', () => {
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                method.classList.add('selected');
            });
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('paymentModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closePaymentModal();
            }
        });
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('paymentModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closePaymentModal();
            }
        });

        // êµ¬ë… ì„œë¹„ìŠ¤ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜
        let currentPaymentItem = null;
        let currentCouponType = 'all';

        const subscriptionPlans = {
            'basic': {
                price: 30000,
                name: 'ì „ë¬¸ê°€ ë² ì´ì§ í”Œëœ',
                description: 'ë§¤ì›” ë‰´ìŠ¤ë ˆí„°, ë¬´ë£Œ ìë£Œ ì ‘ê·¼, ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬',
                features: ['ì›”ê°„ ë‰´ìŠ¤ë ˆí„°', 'ë¬´ë£Œ ìë£Œ ë‹¤ìš´ë¡œë“œ', 'ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬', 'Q&A ê²Œì‹œíŒ ì´ìš©']
            },
            'standard': {
                price: 80000,
                name: 'ì „ë¬¸ê°€ ìŠ¤íƒ ë‹¤ë“œ í”Œëœ',
                description: 'ì›”ê°„ êµìœ¡, 1:1 ë©˜í† ë§, ìœ ë£Œ ìë£Œ ì ‘ê·¼',
                features: ['ì›”ê°„ ì˜¨ë¼ì¸ êµìœ¡', 'ì›” 1íšŒ 1:1 ë©˜í† ë§', 'ëª¨ë“  ìë£Œ ì ‘ê·¼', 'ì»¤ë®¤ë‹ˆí‹° ìš°ì„  ì°¸ì—¬']
            },
            'premium': {
                price: 150000,
                name: 'ì „ë¬¸ê°€ í”„ë¦¬ë¯¸ì—„ í”Œëœ',
                description: 'ì „ë‹´ ë§¤ë‹ˆì €, VIP êµìœ¡, íŠ¹ë³„ í˜œíƒ',
                features: ['ì „ë‹´ ë§¤ë‹ˆì € ë°°ì •', 'ë¬´ì œí•œ 1:1 ë©˜í† ë§', 'VIP êµìœ¡ í”„ë¡œê·¸ë¨', 'ìš°ì„  ê³ ê° ì§€ì›']
            },
            'course': {
                price: 25000,
                name: 'ê°œë³„ ê³¼ì • êµ¬ë…',
                description: 'ì„ íƒí•œ ê³¼ì •ì˜ ì›”ê°„ êµ¬ë…',
                features: ['í•´ë‹¹ ê³¼ì • ëª¨ë“  ì½˜í…ì¸ ', 'ì›”ê°„ ì—…ë°ì´íŠ¸', 'ìˆ˜ë£Œì¦ ë°œê¸‰']
            }
        };

        const availableCoupons = [
            { code: 'SUB30', discount: 30, description: 'êµ¬ë… ì„œë¹„ìŠ¤ 30% í• ì¸', applicableServices: ['êµ¬ë…'] },
            { code: 'WELCOME15', discount: 15, description: 'ì‹ ê·œ ê°€ì… 15% í• ì¸', applicableServices: ['ì „ë¬¸ê°€', 'ì¶”ì²œ', 'êµ¬ë…'] },
            { code: 'PREMIUM20', discount: 20, description: 'í”„ë¦¬ë¯¸ì—„ í”Œëœ 20% í• ì¸', applicableServices: ['êµ¬ë…'] }
        ];

        // êµ¬ë… ì„œë¹„ìŠ¤ ê´€ë ¨ í•¨ìˆ˜
        function showSubscriptionModal(plan, courseName = null) {
            const planInfo = subscriptionPlans[plan];
            if (!planInfo) return;

            let title = planInfo.name;
            let description = planInfo.description;

            if (courseName) {
                title = courseName;
                description = `ì›” ${planInfo.price.toLocaleString()}ì›ì˜ êµ¬ë…ë£Œë¡œ ë§¤ì›” ìƒˆë¡œìš´ ì½˜í…ì¸ ì™€ í˜œíƒì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            }

            currentPaymentItem = {
                type: plan === 'course' ? 'course' : 'subscription',
                plan: plan,
                name: title,
                basePrice: planInfo.price,
                description: description
            };

            updateSubscriptionModal();
            document.getElementById('subscriptionPaymentModal').style.display = 'flex';
        }

        function updateSubscriptionModal() {
            const item = currentPaymentItem;
            if (!item) return;

            document.getElementById('subscriptionItemName').textContent = item.name;
            document.getElementById('subscriptionBasePrice').textContent = `ì›” ${item.basePrice.toLocaleString()}ì›`;

            const couponSelect = document.getElementById('subscriptionCouponSelect');
            couponSelect.value = '';
            document.getElementById('subscriptionCouponInput').style.display = 'none';
            document.getElementById('subscriptionCouponCode').value = '';
            updateSubscriptionPrice();
        }

        function updateSubscriptionPrice() {
            const item = currentPaymentItem;
            if (!item) return;

            const couponSelect = document.getElementById('subscriptionCouponSelect');
            const couponInput = document.getElementById('subscriptionCouponCode');
            const selectedCouponText = couponSelect.value;

            let discount = 0;
            let finalPrice = item.basePrice;

            if (selectedCouponText) {
                const coupon = availableCoupons.find(c => `${c.discount}% í• ì¸ì¿ í°` === selectedCouponText);
                if (coupon) {
                    discount = Math.floor(item.basePrice * coupon.discount / 100);
                    finalPrice = item.basePrice - discount;
                }
            } else if (couponInput.value.trim()) {
                const enteredCode = couponInput.value.trim();
                const coupon = availableCoupons.find(c => c.code === enteredCode);
                if (coupon && coupon.applicableServices.includes('êµ¬ë…')) {
                    discount = Math.floor(item.basePrice * coupon.discount / 100);
                    finalPrice = item.basePrice - discount;
                }
            }

            document.getElementById('subscriptionDiscount').textContent = `-${discount.toLocaleString()}ì›`;
            document.getElementById('subscriptionFinalPrice').textContent = `ì›” ${finalPrice.toLocaleString()}ì›`;
        }

        function applySubscriptionCoupon() {
            const couponSelect = document.getElementById('subscriptionCouponSelect');
            const couponInput = document.getElementById('subscriptionCouponCode');
            const applyButton = document.getElementById('applySubscriptionCouponBtn');

            if (couponSelect.value === 'ì§ì ‘ì…ë ¥') {
                if (!couponInput.value.trim()) {
                    showNotification('ì¿ í° ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                    return;
                }
            }

            const couponSelectValue = couponSelect.value;
            const couponInputValue = couponInput.value.trim();

            // ì¿ í° ì ìš© ë¡œì§
            if (couponSelectValue && couponSelectValue !== 'ì§ì ‘ì…ë ¥') {
                showNotification('ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else if (couponInputValue) {
                const coupon = availableCoupons.find(c => c.code === couponInputValue);
                if (coupon && coupon.applicableServices.includes('êµ¬ë…')) {
                    showNotification('ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                } else {
                    showNotification('ìœ íš¨í•˜ì§€ ì•Šì€ ì¿ í° ì½”ë“œì…ë‹ˆë‹¤.', 'error');
                    return;
                }
            }

            applyButton.textContent = 'ì¿ í° ì ìš©ë¨';
            applyButton.style.backgroundColor = '#28a745';

            setTimeout(() => {
                applyButton.textContent = 'ì¿ í° ì ìš©';
                applyButton.style.backgroundColor = '#007bff';
            }, 2000);

            updateSubscriptionPrice();
        }

        // ì¿ í° ê´€ë ¨ í•¨ìˆ˜ë“¤
        function showCouponsModal(type) {
            currentCouponType = type;
            updateCouponsModal();
            document.getElementById('couponsModal').style.display = 'flex';
        }

        function updateCouponsModal() {
            const couponsList = document.getElementById('availableCouponsList');
            couponsList.innerHTML = '';

            const userCoupons = [
                { code: 'EXPERT2024', discount: 20, service: 'ì¶”ì²œ', description: 'ì¶”ì²œ ì „ë¬¸ê°€ ì—…ê·¸ë ˆì´ë“œ 20% í• ì¸', validUntil: '2024.12.31', used: false },
                { code: 'LEARN30', discount: 30, service: 'êµ¬ë…', description: 'êµ¬ë… ì„œë¹„ìŠ¤ 30% í• ì¸ (ì²« 3ê°œì›”)', validUntil: '2024.11.30', used: false },
                { code: 'WELCOME15', discount: 15, service: 'ì „ë¬¸ê°€', description: 'ì „ë¬¸ê°€ ë“±ë¡ 15% í• ì¸', validUntil: '2024.12.15', used: true },
            ];

            const filteredCoupons = userCoupons.filter(coupon =>
                !coupon.used && (currentCouponType === 'all' || coupon.service === currentCouponType)
            );

            if (filteredCoupons.length === 0) {
                couponsList.innerHTML = '<p style="text-align: center; color: #999;">ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í°ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            filteredCoupons.forEach(coupon => {
                const couponElement = document.createElement('div');
                couponElement.className = 'coupon-item';
                couponElement.innerHTML = `
                    <div class="coupon-info">
                        <div class="coupon-code">${coupon.code}</div>
                        <div class="coupon-description">${coupon.description}</div>
                        <div class="coupon-discount">${coupon.discount}% í• ì¸</div>
                        <div class="coupon-valid">~ ${coupon.validUntil}</div>
                    </div>
                    <div class="coupon-actions">
                        <button class="apply-coupon-btn" onclick="copyCouponCode('${coupon.code}')">
                            ì½”ë“œ ë³µì‚¬
                        </button>
                    </div>
                `;
                couponsList.appendChild(couponElement);
            });
        }

        function copyCouponCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                showNotification(`ì¿ í° ì½”ë“œ ${code}ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }).catch(() => {
                showNotification('ì¿ í° ì½”ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            });
        }

        function processSubscriptionPayment() {
            const item = currentPaymentItem;
            if (!item) return;

            const couponSelect = document.getElementById('subscriptionCouponSelect');
            const couponInput = document.getElementById('subscriptionCouponCode');
            const paymentMethod = document.getElementById('subscriptionPaymentMethod').value;

            let discount = 0;
            let appliedCoupon = null;

            if (couponSelect.value && couponSelect.value !== 'ì§ì ‘ì…ë ¥') {
                appliedCoupon = couponSelect.value;
                const coupon = availableCoupons.find(c => `${c.discount}% í• ì¸ì¿ í°` === appliedCoupon);
                if (coupon) discount = coupon.discount;
            } else if (couponInput.value.trim()) {
                const enteredCode = couponInput.value.trim();
                const coupon = availableCoupons.find(c => c.code === enteredCode);
                if (coupon && coupon.applicableServices.includes('êµ¬ë…')) {
                    appliedCoupon = coupon.code;
                    discount = coupon.discount;
                }
            }

            showProcessingModal();

            setTimeout(() => {
                document.getElementById('subscriptionPaymentModal').style.display = 'none';
                showPaymentCompleteModal('êµ¬ë…', item.name, discount, appliedCoupon);
                updateStatistics();
            }, 2000);
        }

        // ê²°ì œ ì²˜ë¦¬ ê³µí†µ í•¨ìˆ˜
        function showProcessingModal() {
            document.getElementById('processingModal').style.display = 'flex';
        }

        function showPaymentCompleteModal(serviceType, itemName, discount = 0, couponCode = null) {
            const item = currentPaymentItem;
            if (!item) return;

            const completeItemName = document.getElementById('completeItemName');
            const completeItemPrice = document.getElementById('completeItemPrice');
            const completeDiscount = document.getElementById('completeDiscount');
            const completePaymentMethod = document.getElementById('completePaymentMethod');
            const completeCouponInfo = document.getElementById('completeCouponInfo');

            completeItemName.textContent = itemName;
            completeItemPrice.textContent = `${item.basePrice.toLocaleString()}ì›`;
            completeDiscount.textContent = discount > 0 ? `-${discount.toLocaleString()}ì›` : '0ì›';
            completePaymentMethod.textContent = getPaymentMethodText(document.getElementById('subscriptionPaymentMethod').value);

            completeCouponInfo.textContent = couponCode ? `ì¿ í° ì ìš©: ${couponCode}` : 'ì¿ í° ë¯¸ì ìš©';

            setTimeout(() => {
                document.getElementById('processingModal').style.display = 'none';
                document.getElementById('paymentCompleteModal').style.display = 'flex';
            }, 1500);
        }

        function getPaymentMethodText(method) {
            const methods = {
                'card': 'ì‹ ìš©ì¹´ë“œ',
                'kakao': 'ì¹´ì¹´ì˜¤í˜ì´',
                'naver': 'ë„¤ì´ë²„í˜ì´',
                'bank': 'ê³„ì¢Œì´ì²´'
            };
            return methods[method] || method;
        }

        function closeSubscriptionModal() {
            document.getElementById('subscriptionPaymentModal').style.display = 'none';
            currentPaymentItem = null;
        }

        function closePaymentCompleteModal() {
            document.getElementById('paymentCompleteModal').style.display = 'none';
        }

        function closeCouponsModal() {
            document.getElementById('couponsModal').style.display = 'none';
        }

        // ê²°ì œ ì™„ë£Œ í›„ ì•Œë¦¼
        function showPaymentCompleteNotification() {
            showNotification('ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë§ˆì´í˜ì´ì§€ì—ì„œ í™•ì¸í•´ì£¼ì„¸ìš”.', 'success');
        }

        // ì•Œë¦¼ í•¨ìˆ˜
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#007bff'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10001;
                font-size: 14px;
                font-weight: 500;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatistics() {
            const statsElements = {
                monthlyPayment: document.querySelector('.stat-card:nth-child(1) .stat-value'),
                savedAmount: document.querySelector('.stat-card:nth-child(2) .stat-value'),
                activeServices: document.querySelector('.stat-card:nth-child(3) .stat-value'),
                totalPayments: document.querySelector('.stat-card:nth-child(4) .stat-value')
            };

            // í†µê³„ ì—…ë°ì´íŠ¸ ë¡œì§ (ì˜ˆì‹œ)
            if (statsElements.monthlyPayment) {
                const currentValue = parseInt(statsElements.monthlyPayment.textContent.replace(/[^0-9]/g, ''));
                statsElements.monthlyPayment.textContent = `â‚©${(currentValue + 30000).toLocaleString()}`;
            }
        }

        // êµ¬ë… ì¿ í° ì„ íƒ ë³€ê²½ ì‹œ
        document.addEventListener('DOMContentLoaded', function() {
            const subscriptionCouponSelect = document.getElementById('subscriptionCouponSelect');
            if (subscriptionCouponSelect) {
                subscriptionCouponSelect.addEventListener('change', function() {
                    const couponInput = document.getElementById('subscriptionCouponInput');
                    if (this.value === 'ì§ì ‘ì…ë ¥') {
                        couponInput.style.display = 'flex';
                    } else {
                        couponInput.style.display = 'none';
                        updateSubscriptionPrice();
                    }
                });
            }
        });
    </script>

    <!-- êµ¬ë… ê²°ì œ ëª¨ë‹¬ -->
    <div class="modal" id="subscriptionPaymentModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>êµ¬ë… ê²°ì œ</h3>
                <button class="modal-close" onclick="closeSubscriptionModal()">Ã—</button>
            </div>

            <div class="modal-body">
                <div class="payment-summary">
                    <div class="payment-item">
                        <div class="payment-info">
                            <div class="payment-title" id="subscriptionItemName">êµ¬ë… ì„œë¹„ìŠ¤</div>
                            <div class="payment-date">ì›”ê°„ êµ¬ë…</div>
                        </div>
                        <div class="payment-amount" id="subscriptionBasePrice">â‚©30,000</div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì¿ í° ì ìš©</label>
                    <select class="form-select" id="subscriptionCouponSelect" onchange="updateSubscriptionPrice()">
                        <option value="">ì¿ í° ì„ íƒ</option>
                        <option value="30% í• ì¸ì¿ í°">30% í• ì¸ì¿ í°</option>
                        <option value="20% í• ì¸ì¿ í°">20% í• ì¸ì¿ í°</option>
                        <option value="15% í• ì¸ì¿ í°">15% í• ì¸ì¿ í°</option>
                        <option value="ì§ì ‘ì…ë ¥">ì§ì ‘ì…ë ¥</option>
                    </select>
                    <div class="coupon-input-container" id="subscriptionCouponInput" style="display: none;">
                        <input type="text" class="form-control" id="subscriptionCouponCode" placeholder="ì¿ í° ì½”ë“œ ì…ë ¥">
                        <button class="btn btn-primary" id="applySubscriptionCouponBtn" onclick="applySubscriptionCoupon()">ì¿ í° ì ìš©</button>
                    </div>
                </div>

                <div class="price-breakdown">
                    <div class="price-row">
                        <span>êµ¬ë…ë£Œ</span>
                        <span id="subscriptionBasePrice">â‚©30,000</span>
                    </div>
                    <div class="price-row discount">
                        <span>í• ì¸</span>
                        <span id="subscriptionDiscount">â‚©0</span>
                    </div>
                    <div class="price-row total">
                        <span>ì›” ê²°ì œê¸ˆì•¡</span>
                        <span id="subscriptionFinalPrice">â‚©30,000</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ê²°ì œ ìˆ˜ë‹¨</label>
                    <select class="form-select" id="subscriptionPaymentMethod">
                        <option value="card">ì‹ ìš©ì¹´ë“œ</option>
                        <option value="kakao">ì¹´ì¹´ì˜¤í˜ì´</option>
                        <option value="naver">ë„¤ì´ë²„í˜ì´</option>
                        <option value="bank">ê³„ì¢Œì´ì²´</option>
                    </select>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSubscriptionModal()">ì·¨ì†Œ</button>
                <button class="btn btn-success" onclick="processSubscriptionPayment()">êµ¬ë… ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì¿ í° ëª¨ë‹¬ -->
    <div class="modal" id="couponsModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í°</h3>
                <button class="modal-close" onclick="closeCouponsModal()">Ã—</button>
            </div>

            <div class="modal-body">
                <div class="coupon-filter">
                    <button class="filter-btn active" onclick="filterCoupons('all')">ì „ì²´</button>
                    <button class="filter-btn" onclick="filterCoupons('ì „ë¬¸ê°€')">ì „ë¬¸ê°€ ë“±ë¡</button>
                    <button class="filter-btn" onclick="filterCoupons('ì¶”ì²œ')">ì¶”ì²œ ì „ë¬¸ê°€</button>
                    <button class="filter-btn" onclick="filterCoupons('êµ¬ë…')">êµ¬ë… ì„œë¹„ìŠ¤</button>
                </div>

                <div class="coupons-list" id="availableCouponsList">
                    <!-- ì¿ í° ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- ê²°ì œ ì²˜ë¦¬ ì¤‘ ëª¨ë‹¬ -->
    <div class="modal" id="processingModal" style="display: none;">
        <div class="modal-content" style="text-align: center; padding: 40px;">
            <div class="spinner" style="margin: 0 auto 20px;"></div>
            <h3>ê²°ì œ ì²˜ë¦¬ ì¤‘</h3>
            <p>ì•ˆì „í•˜ê²Œ ê²°ì œë¥¼ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>
        </div>
    </div>

    <!-- ê²°ì œ ì™„ë£Œ ëª¨ë‹¬ -->
    <div class="modal" id="paymentCompleteModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="color: #28a745;">ê²°ì œ ì™„ë£Œ</h3>
            </div>

            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 48px; color: #28a745; margin-bottom: 10px;">âœ“</div>
                    <p style="font-size: 18px; font-weight: 600;">ê²°ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                </div>

                <div class="payment-summary">
                    <div class="payment-item">
                        <div class="payment-info">
                            <div class="payment-title" id="completeItemName">ì„œë¹„ìŠ¤ëª…</div>
                            <div class="payment-date" id="completePaymentMethod">ê²°ì œìˆ˜ë‹¨</div>
                        </div>
                    </div>
                </div>

                <div class="price-breakdown">
                    <div class="price-row">
                        <span>ê²°ì œê¸ˆì•¡</span>
                        <span id="completeItemPrice">â‚©0</span>
                    </div>
                    <div class="price-row discount">
                        <span>í• ì¸</span>
                        <span id="completeDiscount">â‚©0</span>
                    </div>
                    <div class="price-row total">
                        <span>ì‹¤ê²°ì œê¸ˆì•¡</span>
                        <span id="completeFinalPrice">â‚©0</span>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; font-size: 14px; color: #6c757d;" id="completeCouponInfo">ì¿ í° ì •ë³´</p>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closePaymentCompleteModal()">í™•ì¸</button>
            </div>
        </div>
    </div>

    <style>
        /* ì¶”ê°€ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .coupon-input-container {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .coupon-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: none;
            background: #f8f9fa;
            color: #6c757d;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #007bff;
            color: white;
        }

        .filter-btn:hover {
            background: #e9ecef;
        }

        .filter-btn.active:hover {
            background: #0056b3;
        }

        .coupons-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .coupon-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f8f9fa;
        }

        .coupon-info {
            flex: 1;
        }

        .coupon-code {
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }

        .coupon-description {
            font-size: 14px;
            color: #495057;
            margin-bottom: 3px;
        }

        .coupon-discount {
            font-weight: bold;
            color: #dc3545;
            margin-bottom: 3px;
        }

        .coupon-valid {
            font-size: 12px;
            color: #6c757d;
        }

        .apply-coupon-btn {
            padding: 6px 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .apply-coupon-btn:hover {
            background: #0056b3;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .price-breakdown {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .price-row:last-child {
            border-bottom: none;
        }

        .price-row.discount {
            color: #dc3545;
        }

        .price-row.total {
            font-weight: bold;
            font-size: 16px;
            color: #007bff;
            border-top: 2px solid #007bff;
            margin-top: 10px;
            padding-top: 15px;
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }

        .payment-summary {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</body>
</html>
